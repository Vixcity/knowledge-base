/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

var InlineType;
(function (InlineType) {
    InlineType["text"] = "text";
    InlineType["code"] = "code";
    InlineType["formula"] = "formula";
    InlineType["link"] = "link";
    InlineType["user"] = "user-defined";
    InlineType["none"] = "none";
})(InlineType || (InlineType = {}));
var LineType;
(function (LineType) {
    LineType["text"] = "text";
    LineType["code"] = "code";
    LineType["formula"] = "formula";
    LineType["frontmatter"] = "frontmatter";
    LineType["none"] = "none";
})(LineType || (LineType = {}));
const DEFAULT_SETTINGS = {
    AutoFormatting: true,
    ChineseEnglishSpace: true,
    ChineseNoSpace: true,
    EnglishSpace: true,
    Capitalization: true,
    BraceSpace: true,
    NumberSpace: true,
    InlineCodeSpace: true,
    InlineFormulaSpace: true,
    LinkSpace: true,
    LinkSmartSpace: true,
    FullWidthCharacterEnhence: true,
    UserDefinedRegExp: ':\\w*:\n{{.*?}}',
    UserDefinedRegSwitch: true,
    UserPartSpace: true,
    Debug: false
};
function getLineTypeFromArticleParts(line, typeArray) {
    for (let i = 0; i < typeArray.length; i++) {
        if (line >= typeArray[i].begin && line < typeArray[i].end) {
            return typeArray[i].type;
        }
    }
}
function splitArticle(article) {
    let retArray = [];
    let lines = article.split('\n');
    let regNullLine = /^\s*$/;
    let regFormulaBegin = /^\s*(\- (\[[x ]\] )?)?\$\$/;
    let regFormulaEnd = /\$\$$/;
    let regCodeBegin = /^\s*```/;
    let regCodeEnd = /^\s*```$/;
    let index = 0;
    // 1. 判断 frontmatter
    let frontMatterPart;
    for (let i = 0; i < lines.length; i++) {
        if (regNullLine.test(lines[i])) {
            continue;
        }
        else if (lines[i] === '---') {
            for (let j = i + 1; j < lines.length; j++) {
                if (lines[j] === '---') {
                    if (i != 0) {
                        retArray.push({
                            type: LineType.text,
                            begin: 0,
                            end: i
                        });
                    }
                    frontMatterPart = {
                        type: LineType.frontmatter,
                        begin: i,
                        end: j + 1
                    };
                    retArray.push(frontMatterPart);
                    index = j + 1;
                    break;
                }
            }
            break;
        }
        else {
            break;
        }
    }
    // console.log('index', index);
    // 2. 遍历行得到 LineType 分区
    while (index < lines.length) {
        if (regCodeBegin.test(lines[index])) {
            let j = index + 1;
            while (j < lines.length) {
                if (regCodeEnd.test(lines[j]))
                    break;
                j++;
            }
            retArray.push({
                type: LineType.code,
                begin: index,
                end: j + 1
            });
            index = j + 1;
        }
        else if (regFormulaBegin.test(lines[index])) {
            let regFormulaOneLine = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
            if (regFormulaOneLine.test(lines[index])) {
                retArray.push({
                    type: LineType.formula,
                    begin: index,
                    end: index + 1
                });
                index += 1;
            }
            else {
                let j = index + 1;
                while (j < lines.length) {
                    if (regFormulaEnd.test(lines[j]))
                        break;
                    j++;
                }
                retArray.push({
                    type: LineType.formula,
                    begin: index,
                    end: j + 1
                });
                index = j + 1;
            }
        }
        else {
            let j = index + 1;
            for (; j < lines.length; j++) {
                if (regCodeBegin.test(lines[j]) || regFormulaBegin.test(lines[j])) {
                    break;
                }
            }
            retArray.push({
                type: LineType.text,
                begin: index,
                end: j
            });
            index = j;
        }
    }
    return retArray;
}
function stringDeleteAt(str, index) {
    return str.substring(0, index) + str.substring(index + 1);
}
function stringInsertAt(str, index, s) {
    return str.substr(0, index) + s + str.substring(index);
}
function splitLine(line, regExps) {
    let regInlineMark = /(?<!\\)\$|(?<!\\)\`/g;
    let regFormulaInline = /(?<!\\)\$(?! )[^]+?(?<! )(?<!\\)\$/g;
    let regFormulaBlock = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
    let regCode = /(?<!\\)`[^]*?(?<!\\)`/g;
    let markQueue = [];
    let arrayOfInlineTextCodeFormula = [];
    while (true) {
        let match = regInlineMark.exec(line);
        if (!match)
            break;
        markQueue.push(match);
    }
    let textBeginIndex = 0;
    while (markQueue.length != 0) {
        let mark = markQueue.shift();
        if (mark.index < textBeginIndex)
            continue;
        if (mark[0] === '$') {
            let matchFormulaBeginIndex;
            let matchFormulaLastIndex;
            regFormulaBlock.lastIndex = mark.index;
            let matchBlockFormula = regFormulaBlock.exec(line);
            if (matchBlockFormula && matchBlockFormula.index === mark.index) {
                matchFormulaBeginIndex = matchBlockFormula.index;
                matchFormulaLastIndex = regFormulaBlock.lastIndex;
            }
            else {
                regFormulaInline.lastIndex = mark.index;
                let matchInlineFormula = regFormulaInline.exec(line);
                if (matchInlineFormula && matchInlineFormula.index === mark.index) {
                    matchFormulaBeginIndex = matchInlineFormula.index;
                    matchFormulaLastIndex = regFormulaInline.lastIndex;
                }
                // 如果没匹配到，则 continue
                else {
                    continue;
                }
            }
            if (mark.index > textBeginIndex) {
                arrayOfInlineTextCodeFormula.push({
                    content: line.substring(textBeginIndex, mark.index),
                    type: InlineType.text,
                    begin: textBeginIndex,
                    end: mark.index
                });
            }
            arrayOfInlineTextCodeFormula.push({
                content: line.substring(matchFormulaBeginIndex, matchFormulaLastIndex),
                type: InlineType.formula,
                begin: matchFormulaBeginIndex,
                end: matchFormulaLastIndex
            });
            textBeginIndex = matchFormulaLastIndex;
            continue;
        }
        else if (mark[0] === '`') {
            let matchCodeBeginIndex;
            let matchCodeLastIndex;
            regCode.lastIndex = mark.index;
            let matchInlineCode = regCode.exec(line);
            if (matchInlineCode && matchInlineCode.index === mark.index) {
                matchCodeBeginIndex = matchInlineCode.index;
                matchCodeLastIndex = regCode.lastIndex;
                if (mark.index > textBeginIndex) {
                    arrayOfInlineTextCodeFormula.push({
                        content: line.substring(textBeginIndex, mark.index),
                        type: InlineType.text,
                        begin: textBeginIndex,
                        end: mark.index
                    });
                }
                arrayOfInlineTextCodeFormula.push({
                    content: line.substring(matchCodeBeginIndex, matchCodeLastIndex),
                    type: InlineType.code,
                    begin: matchCodeBeginIndex,
                    end: matchCodeLastIndex
                });
                textBeginIndex = matchCodeLastIndex;
                continue;
            }
            else {
                continue;
            }
        }
    }
    if (textBeginIndex != line.length) {
        arrayOfInlineTextCodeFormula.push({
            content: line.substring(textBeginIndex),
            type: InlineType.text,
            begin: textBeginIndex,
            end: line.length
        });
    }
    // =======================================
    let retArray = [];
    for (let i = 0; i < arrayOfInlineTextCodeFormula.length; i++) {
        if (arrayOfInlineTextCodeFormula[i].type != InlineType.text) {
            retArray.push(arrayOfInlineTextCodeFormula[i]);
        }
        else {
            let tempArray;
            if (regExps)
                tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content, regExps);
            else
                tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content);
            tempArray.forEach(item => {
                item.begin += arrayOfInlineTextCodeFormula[i].begin;
                item.end += arrayOfInlineTextCodeFormula[i].begin;
                retArray.push(item);
            });
        }
    }
    return retArray;
}
function matchWithReg(text, regExp, type, inlineTypeArray, checkArray = false) {
    let retArray = inlineTypeArray;
    let matchArray = [];
    retArray = retArray.sort((a, b) => a.begin - b.begin);
    // console.log('before-----------\n',retArray)
    while (true) {
        let match = regExp.exec(text);
        if (!match)
            break;
        let valid = true;
        // 检查冲突
        if (checkArray) {
            for (let i = 0; i < retArray.length; i++) {
                if (match.index <= retArray[i].begin) {
                    if (regExp.lastIndex <= retArray[i].begin) {
                        valid = true;
                        break;
                    }
                    else if (regExp.lastIndex <= retArray[i].end) {
                        valid = false;
                        break;
                    }
                    else if (regExp.lastIndex > retArray[i].end) {
                        let removeCount = 1;
                        valid = true;
                        for (let j = i + 1; j < retArray.length; j++) {
                            if (regExp.lastIndex <= retArray[j].begin) {
                                removeCount = j - i;
                                valid = true;
                                break;
                            }
                            else if (regExp.lastIndex < retArray[j].end) {
                                valid = false;
                                break;
                            }
                            else {
                                continue;
                            }
                        }
                        if (valid) {
                            retArray.splice(i, removeCount);
                            i -= 1;
                        }
                        break;
                    }
                }
                if (match.index > retArray[i].begin && match.index < retArray[i].end) {
                    valid = false;
                    break;
                }
            }
        }
        if (!valid)
            continue;
        matchArray.push({
            content: match[0],
            type: type,
            begin: match.index,
            end: regExp.lastIndex
        });
    }
    retArray = retArray.concat(matchArray);
    // console.log('After===========\n', retArray);
    return retArray;
}
function splitTextWithLinkAndUserDefined(text, regExps) {
    let retArray = [];
    let regWikiLink = /\!?\[\[[^\[\]]*?\]\]/g;
    let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
    // let regBareLink = /(https?|obsidian|zotero):\/\/[^\s\)\(\[\]\{\}']+/g;
    let regBareLink = /(https?:\/\/|obsidian:\/\/|zotero:\/\/|www.)[^\s\)\(\[\]\{\}']+/g;
    // 1. 匹配wikilink
    retArray = matchWithReg(text, regWikiLink, InlineType.link, retArray);
    // 2. 匹配mdlink
    retArray = matchWithReg(text, regMdLink, InlineType.link, retArray);
    // 3. 匹配用户自定义正则
    let regExpList = [];
    if (regExps) {
        let regs = regExps.split('\n');
        for (let i = 0; i < regs.length; i++) {
            let regNull = /^\s*$/g;
            if (regNull.test(regs[i]))
                continue;
            let isValidReg = true;
            try {
                let regTemp = new RegExp(regs[i], 'g');
            }
            catch (error) {
                isValidReg = false;
                console.log('Bad Reg:', regs[i]);
            }
            if (isValidReg) {
                regExpList.push(new RegExp(regs[i], 'g'));
                // console.log('Good Reg:', regs[i]);
            }
        }
        let regLen = regExpList.length;
        for (let i = 0; i < regLen; i++) {
            retArray = matchWithReg(text, regExpList[i], InlineType.user, retArray, true);
        }
    }
    // 4. 匹配纯链接
    retArray = matchWithReg(text, regBareLink, InlineType.link, retArray, true);
    // 5. 得到剩余的文本部分
    retArray = retArray.sort((a, b) => a.begin - b.begin);
    let textArray = [];
    let textBegin = 0;
    let textEnd = 0;
    for (let i = 0; i < retArray.length; i++) {
        if (textBegin < retArray[i].begin) {
            textEnd = retArray[i].begin;
            textArray.push({
                content: text.substring(textBegin, textEnd),
                type: InlineType.text,
                begin: textBegin,
                end: textEnd
            });
        }
        textBegin = retArray[i].end;
    }
    if (textBegin != text.length) {
        textArray.push({
            content: text.substring(textBegin, text.length),
            type: InlineType.text,
            begin: textBegin,
            end: text.length
        });
    }
    // 6. 合并文本部分和其他部分
    retArray = retArray.concat(textArray);
    retArray = retArray.sort((a, b) => a.begin - b.begin);
    return retArray;
}
function formatLine(line, curCursor, settings, prevCursor) {
    let ch = curCursor.ch;
    if (line === '')
        return ['', 0, []];
    // 1. 划分一行文字的内部不同模块区域
    let lineParts;
    if (settings.UserDefinedRegSwitch) {
        lineParts = splitLine(line, settings.UserDefinedRegExp);
    }
    else {
        lineParts = splitLine(line);
    }
    // console.log(lineParts);
    // 备份原来的lineParts, 深拷贝
    let linePartsOrigin = JSON.parse(JSON.stringify(lineParts));
    let inlineChangeList = [];
    let cursorLinePartIndex = -1;
    let cursorRelativeIndex = -1;
    let resultCursorCh = 0; // 输出的光标位置
    // 2. 找到光标所在的部分，如果是 InlinePart.text，则在光标处插入'\0'来标记光标位置
    for (let i = 0; i < lineParts.length; i++) {
        if (ch > lineParts[i].begin && ch <= lineParts[i].end) {
            cursorLinePartIndex = i;
            cursorRelativeIndex = ch - lineParts[i].begin;
            if (lineParts[i].type === InlineType.text) {
                lineParts[i].content = stringInsertAt(lineParts[i].content, cursorRelativeIndex, '\0');
            }
            break;
        }
    }
    let resultLine = '';
    let offset = 0;
    // 保存前一部分的区块类型，InlineType.none 代表一行的开始
    let prevPartType = InlineType.none;
    let prevTextEndWithSpace = false;
    // 3. 遍历每个行部分，进行格式化处理
    for (let i = 0; i < lineParts.length; i++) {
        // console.log(inlineList[i]);
        // 3.1 如果行内第一部分为文本，则处理句首字母大写的部分
        if (i === 0 && lineParts[i].type === InlineType.text && settings.Capitalization) {
            // 3.1.1 如果 prevCursor 且光标不在此部分，则跳过
            if (prevCursor && cursorLinePartIndex != 0) ;
            else {
                let regFirstSentence = /^\s*(\- (\[[x ]\] )?)?[a-z]/g;
                let regHeaderSentence = /^#+ [a-z]/g;
                let textcopy = lineParts[0].content;
                let match = regFirstSentence.exec(textcopy);
                let matchHeader = regHeaderSentence.exec(textcopy);
                let dstCharIndex = -1;
                if (match) {
                    dstCharIndex = regFirstSentence.lastIndex - 1;
                }
                else if (matchHeader) {
                    dstCharIndex = regHeaderSentence.lastIndex - 1;
                }
                if (!prevCursor) ;
                else if (prevCursor.line === curCursor.line && dstCharIndex >= prevCursor.ch && dstCharIndex < curCursor.ch) ;
                else {
                    dstCharIndex = -1;
                }
                if (dstCharIndex != -1) {
                    lineParts[0].content = textcopy.substring(0, dstCharIndex) + textcopy.charAt(dstCharIndex).toUpperCase() + textcopy.substring(dstCharIndex + 1);
                }
            }
        }
        // 3.2 分别处理每种区块情况
        switch (lineParts[i].type) {
            // 3.2.1 处理文本区块
            case InlineType.text:
                let content = lineParts[i].content;
                // console.log('Before', i, lineParts[i].content)
                // Text.4 处理句首字母大写
                if (settings.Capitalization) {
                    var reg = /[\.\?\!。！？]([\s]*)[a-z]/g;
                    while (true) {
                        let match = reg.exec(content);
                        if (!match)
                            break;
                        let tempIndex = reg.lastIndex - 1;
                        // console.log(cursorLinePartIndex)
                        // console.log(prevCursor, curCursor);
                        // console.log(tempIndex);
                        if (!prevCursor) {
                            lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
                            content = lineParts[i].content;
                        }
                        else if (prevCursor && cursorLinePartIndex === i && prevCursor.line === curCursor.line) {
                            if (tempIndex >= prevCursor.ch - offset && tempIndex < curCursor.ch - offset) {
                                lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
                                content = lineParts[i].content;
                            }
                        }
                    }
                }
                // Text.1 处理中英文之间空格
                if (settings.ChineseEnglishSpace) {
                    let reg1 = /([A-Za-z0-9,\.;\?:!])([\u4e00-\u9fa5]+)/gi;
                    let reg2 = /([\u4e00-\u9fa5]+)([A-Za-z0-9])/gi;
                    lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg2, "$1 $2");
                    content = lineParts[i].content;
                }
                // Text.2 处理中文间无空格
                if (settings.ChineseNoSpace) {
                    var reg = /([\u4e00-\u9fa5，。、；‘’《》]+)(\s+)([\u4e00-\u9fa5，。、；‘’《》]+)/g;
                    while (reg.exec(content)) {
                        lineParts[i].content = content.replace(reg, "$1$3");
                        content = lineParts[i].content;
                    }
                }
                // Text.3 处理英文字母与标点间空格
                if (settings.EnglishSpace) {
                    var reg = /([,\.;\?:\!])([A-Za-z])/gi;
                    lineParts[i].content = content.replace(reg, "$1 $2");
                    content = lineParts[i].content;
                }
                // Text.5 处理英文括号与外部文本空格
                if (settings.BraceSpace) {
                    let reg1 = /(\))([A-Za-z0-9\u4e00-\u9fa5]+)/gi;
                    let reg2 = /([A-Za-z0-9\u4e00-\u9fa5:,\.\?']+)(\()/gi;
                    lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg2, "$1 $2");
                    content = lineParts[i].content;
                }
                // Text.6 处理数字与标点的空格
                if (settings.NumberSpace) {
                    let reg1 = /([,;\?:\!\]\}])([0-9])/g;
                    let reg2 = /([0-9])([\[\{])/g;
                    lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg2, "$1 $2");
                    content = lineParts[i].content;
                }
                // Text.7 得到文本部分是否以空白符开始或结束，用来判断后续文本前后是否需要添加空格
                let regStartWithSpace = /^\0?[\s,\.;\?\!，。；？！\]\)\}]/;
                let regEndWithSpace = /[\s，。：？！\[\(\{]\0?$/;
                let textStartWithSpace = regStartWithSpace.test(content);
                let textEndWithSpace = regEndWithSpace.test(content);
                // console.log('Median', i, lineParts[i].content)
                // Text.8 根据前一部分的区块类型处理空格添加的问题
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace && !textStartWithSpace) {
                            lineParts[i].content = ' ' + content;
                            content = lineParts[i].content;
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace && !textStartWithSpace) {
                            lineParts[i].content = ' ' + content;
                            content = lineParts[i].content;
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSmartSpace && !textStartWithSpace) {
                            let regTestWikiLink = /^\[\[.+\]\]$/;
                            if (regTestWikiLink.test(lineParts[i - 1].content)) {
                                let charAtLinkEnd = lineParts[i - 1].content.charAt(lineParts[i - 1].content.length - 3);
                                let charAtTextBegin = lineParts[i].content.charAt(0);
                                let tempStr = charAtLinkEnd + charAtTextBegin;
                                let reg1 = /[A-Za-z0-9,.;\?:\!][\u4e00-\u9fa5]/g;
                                let reg2 = /[\u4e00-\u9fa5][@A-Za-z0-9]/g;
                                let reg3 = /[A-Za-z0-9,.;?:!][A-Za-z0-9]/g;
                                let reg4 = /[,;\?:\!\]\}][0-9]/g;
                                if (reg1.test(tempStr) || reg2.test(tempStr) || reg3.test(tempStr) || reg4.test(tempStr)) {
                                    lineParts[i].content = ' ' + content;
                                    content = lineParts[i].content;
                                    offset += 1;
                                }
                            }
                        }
                        else if (!settings.LinkSmartSpace && settings.LinkSpace && !textStartWithSpace) {
                            lineParts[i].content = ' ' + content;
                            content = lineParts[i].content;
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace && !textStartWithSpace) {
                            lineParts[i].content = ' ' + content;
                            content = lineParts[i].content;
                            offset += 1;
                        }
                        break;
                }
                // Text.9 如果光标在该区块，则计算最终光标的位置
                if (i === cursorLinePartIndex) {
                    let reg = '\0';
                    let n = content.search(reg);
                    resultCursorCh = offset + n;
                    // 删除 \0
                    lineParts[i].content = stringDeleteAt(content, n);
                }
                // console.log('After', i, lineParts[i].content)
                // Text.10 变量更新
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.text;
                prevTextEndWithSpace = textEndWithSpace;
                break;
            // 3.2.2 处理行内代码块部分
            case InlineType.code:
                // Code.1 根据前一区块类型和settings添加空格
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.text:
                        if (settings.InlineCodeSpace && !prevTextEndWithSpace) {
                            lineParts[i - 1].content += ' ';
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace || settings.InlineCodeSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace || settings.InlineCodeSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace || settings.InlineCodeSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                }
                // Code.2 如果光标在该区块，则计算最终光标的位置
                if (i === cursorLinePartIndex) {
                    resultCursorCh = offset + cursorRelativeIndex;
                }
                // Code.3 变量更新
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.code;
                prevTextEndWithSpace = false;
                break;
            // 3.2.3 处理行内公式的部分
            case InlineType.formula:
                // Formula.1 根据前一区块类型和settings添加空格
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.text:
                        if (settings.InlineFormulaSpace && !prevTextEndWithSpace) {
                            lineParts[i - 1].content += ' ';
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace || settings.InlineFormulaSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace || settings.InlineFormulaSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace || settings.InlineFormulaSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                }
                // Formula.2 如果光标在该区块，则计算最终光标的位置
                if (i === cursorLinePartIndex) {
                    resultCursorCh = offset + cursorRelativeIndex;
                }
                // Formula.3 变量更新
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.formula;
                prevTextEndWithSpace = false;
                break;
            // 3.2.4 处理行内链接的部分
            case InlineType.link:
                // Link.1 根据前一区块类型和settings添加空格
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.text:
                        if (settings.LinkSmartSpace && !prevTextEndWithSpace) {
                            let regTestWikiLink = /^\[\[.+\]\]$/;
                            if (regTestWikiLink.test(lineParts[i].content)) {
                                let charAtTextEnd = lineParts[i - 1].content.charAt(lineParts[i - 1].content.length - 1);
                                let charAtLinkBegin = lineParts[i].content.charAt(2);
                                let tempStr = charAtTextEnd + charAtLinkBegin;
                                let reg1 = /[A-Za-z0-9,.;\?:\!][\u4e00-\u9fa5]/g;
                                let reg2 = /[\u4e00-\u9fa5][@A-Za-z0-9]/g;
                                let reg3 = /[A-Za-z0-9,.;?:!][A-Za-z0-9]/g;
                                let reg4 = /[,;\?:\!\]\}][0-9]/g;
                                if (reg1.test(tempStr) || reg2.test(tempStr) || reg3.test(tempStr) || reg4.test(tempStr)) {
                                    lineParts[i - 1].content += ' ';
                                    resultLine += ' ';
                                    offset += 1;
                                }
                            }
                        }
                        else if (settings.LinkSpace && !prevTextEndWithSpace) {
                            lineParts[i - 1].content += ' ';
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace || settings.LinkSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace || settings.LinkSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace || settings.LinkSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                }
                // Link.2 如果该区块有光标，则计算最终光标位置
                if (i === cursorLinePartIndex) {
                    resultCursorCh = offset + cursorRelativeIndex;
                }
                // Link.3 更新变量
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.link;
                prevTextEndWithSpace = false;
                break;
            // 3.2.5 处理用户自定义区块的部分
            case InlineType.user:
                // User.1 根据前一区块类型和settings添加空格
                switch (prevPartType) {
                    case InlineType.none:
                        break;
                    case InlineType.text:
                        if (settings.UserPartSpace && !prevTextEndWithSpace) {
                            lineParts[i - 1].content += ' ';
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.code:
                        if (settings.InlineCodeSpace || settings.UserPartSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.formula:
                        if (settings.InlineFormulaSpace || settings.UserPartSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.link:
                        if (settings.LinkSpace || settings.UserPartSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                    case InlineType.user:
                        if (settings.UserPartSpace) {
                            inlineChangeList.push({
                                text: ' ',
                                begin: lineParts[i].begin,
                                end: lineParts[i].begin,
                                origin: ''
                            });
                            resultLine += ' ';
                            offset += 1;
                        }
                        break;
                }
                // User.2 如果该区块有光标，则计算最终光标位置
                if (i === cursorLinePartIndex) {
                    resultCursorCh = offset + cursorRelativeIndex;
                }
                // Link.3 更新变量
                resultLine += lineParts[i].content;
                offset += lineParts[i].content.length;
                prevPartType = InlineType.user;
                prevTextEndWithSpace = false;
                break;
        }
    }
    for (let i = 0; i < lineParts.length; i++) {
        if (lineParts[i].type === InlineType.text && lineParts[i].content != linePartsOrigin[i].content) {
            inlineChangeList.push({
                text: lineParts[i].content,
                begin: linePartsOrigin[i].begin,
                end: linePartsOrigin[i].end,
                origin: linePartsOrigin[i].content
            });
        }
    }
    inlineChangeList = inlineChangeList.sort((a, b) => a.begin - b.begin);
    return [resultLine, resultCursorCh, inlineChangeList];
}
class EasyTypingPlugin extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.beforeChange = (editor, obj) => {
            if (!this.settings.AutoFormatting)
                return;
            let symbol = obj.text[0];
            let replaceSymbol;
            let reg = /[-\`\$]/;
            if (reg.test(symbol)) {
                this.checkLineType = true;
            }
            if (editor.somethingSelected() && this.settings.FullWidthCharacterEnhence) {
                if (this.settings.Debug)
                    console.log('before change: symbol:', symbol);
                switch (symbol) {
                    case '￥':
                        replaceSymbol = '$$';
                        this.selectedFormatRange = editor.listSelections()[0];
                        break;
                    case '·':
                        replaceSymbol = '``';
                        break;
                    case '【':
                        replaceSymbol = '[]';
                        this.selectedFormatRange = editor.listSelections()[0];
                        break;
                    default:
                        return;
                }
                const selected = editor.getSelection();
                const replaceText = replaceSymbol.charAt(0) + selected + replaceSymbol.charAt(1);
                obj.update(null, null, [replaceText]);
            }
            // else if(!editor.somethingSelected() && this.settings.FullWidthCharacterEnhence)
            // {
            //     switch(symbol)
            //     {
            //         case '……':
            //             obj.update(null, null, ['^']);
            //             break;
            //         default:
            //             return;
            //     }
            // }
        };
        this.handleKeyDown = (editor, event) => {
            if (this.settings.Debug) {
                console.log('=========================');
                console.log('keydown:', event.key);
            }
            if (!this.settings.AutoFormatting)
                return;
            if (event.key === 'Process') {
                this.inputChineseFlag = true;
            }
            if (event.key === 'Control') {
                this.keyCtrlFlag = true;
            }
        };
        this.handleKeyUp = (editor, event) => {
            if (this.settings.Debug) {
                console.log('=========================');
                console.log('keyup:', event.key);
                if (event.key === 'F4') {
                    console.log("Test Begin========================");
                    console.log("Test End========================");
                    this.prevCursor = editor.getCursor();
                    return;
                }
            }
            if (this.settings.AutoFormatting === false) {
                this.prevCursor = editor.getCursor();
                return;
            }
            // selectFormat
            if (this.selectedFormatRange != null) {
                let selectedStart = this.selectedFormatRange.from();
                let selectedEnd = this.selectedFormatRange.to();
                selectedStart.ch += 1;
                selectedEnd.ch += 1;
                editor.setSelection(selectedStart, selectedEnd);
                this.selectedFormatRange = null;
            }
            if (editor.somethingSelected()) {
                return;
            }
            if (this.settings.FullWidthCharacterEnhence) {
                let cursor = editor.getCursor();
                let twoCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
                editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch + 1 });
                let character2cursor1 = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
                let twoCharactersAfterCursor = editor.getRange({ line: cursor.line, ch: cursor.ch }, { line: cursor.line, ch: cursor.ch + 2 });
                switch (event.key) {
                    case '$':
                    case '￥':
                        if (twoCharactersBeforeCursor === '￥￥') {
                            editor.replaceRange('$$', { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
                        }
                        else if (character2cursor1 === '$￥$') {
                            editor.replaceRange('$$', { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor(cursor);
                        }
                        break;
                    case '[':
                    case '【':
                        if (twoCharactersBeforeCursor === '[[' && twoCharactersAfterCursor != ']]') {
                            editor.replaceRange('[[]]', { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor(cursor);
                        }
                        break;
                    case '`':
                    case '·':
                        if (twoCharactersBeforeCursor === '··') {
                            editor.replaceRange('``', { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
                        }
                        else if (character2cursor1 === '`·`') {
                            editor.replaceRange('`', { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
                            editor.setCursor({ line: cursor.line, ch: cursor.ch + 1 });
                        }
                        break;
                }
            }
            if (event.key === 'Control') {
                this.keyCtrlFlag = false;
                this.prevCursor = editor.getCursor();
                return;
            }
            if (this.keyCtrlFlag && event.key === 'z') {
                this.prevCursor = editor.getCursor();
                return;
            }
            if (this.keySetNotUpdate.has(event.key)) {
                this.prevCursor = editor.getCursor();
                return;
            }
            if (this.inputChineseFlag) {
                // windows下判断中文输入的结束点，检测到数字或者空格就是输入中文结束，Shift是中文输入法输入英文。
                // 匹配,.;'<>是中文输入法的全角字符，。；‘’《》
                if (event.key.match(/[0-9 ,.;<>:'`\\\/]/gi) != null || event.key === 'Shift') {
                    // console.log("chinese input done!");
                    this.inputChineseFlag = false;
                }
                else {
                    return;
                }
            }
            let cursor = editor.getCursor();
            let line = editor.getLine(cursor.line);
            let thisLineType;
            // 在文档行数变化时，或者checkLineType为真时，重新 parse article
            if (this.checkLineType || this.prevLineCount != editor.lineCount()) {
                if (this.settings.Debug)
                    new obsidian.Notice('reparse article');
                this.lineTypeArray = splitArticle(editor.getValue());
                thisLineType = getLineTypeFromArticleParts(cursor.line, this.lineTypeArray);
                this.prevLineType = thisLineType;
                this.prevLineCount = editor.lineCount();
                this.checkLineType = false;
            }
            // 在其他行编辑的时候，需要先获取下行的类型
            else if (cursor.line != this.prevCursor.line) {
                thisLineType = getLineTypeFromArticleParts(cursor.line, this.lineTypeArray);
                this.prevLineType = thisLineType;
            }
            else {
                thisLineType = this.prevLineType;
            }
            if (thisLineType != LineType.text) {
                this.prevCursor = editor.getCursor();
                return;
            }
            let ret = formatLine(line, cursor, this.settings, this.prevCursor);
            // console.log(line)
            // console.log(ret)
            let inlineChangeList = ret[2];
            if (inlineChangeList.length != 0) {
                let offset = 0;
                for (let i = 0; i < inlineChangeList.length; i++) {
                    let changeBegin = {
                        line: cursor.line,
                        ch: inlineChangeList[i].begin + offset
                    };
                    let changeEnd = {
                        line: cursor.line,
                        ch: inlineChangeList[i].end + offset
                    };
                    offset += inlineChangeList[i].text.length - inlineChangeList[i].origin.length;
                    editor.replaceRange(inlineChangeList[i].text, changeBegin, changeEnd);
                }
                editor.setCursor({
                    line: cursor.line,
                    ch: ret[1]
                });
                editor.focus();
            }
            this.prevCursor = editor.getCursor();
        };
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('loading plugin：Easy Typing');
            yield this.loadSettings();
            this.keyCtrlFlag = false;
            this.inputChineseFlag = false;
            this.keySetNotUpdate = new Set(['Control', 'Tab', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Alt', 'Backspace', 'Escape', 'Delete', 'NumLock']);
            // this.prevPosition = {type:LineType.none, line:0, ch:0};
            this.prevCursor = { line: 0, ch: 0 };
            this.prevLineType = LineType.none;
            this.prevLineCount = null;
            this.lineTypeArray = null;
            this.checkLineType = true;
            this.selectedFormatRange = null;
            this.addCommand({
                id: "easy-typing-format-line",
                name: "format current line",
                callback: () => this.commandFormatLine(),
                hotkeys: [{
                        modifiers: ['Alt'],
                        key: "l"
                    }],
            });
            this.addCommand({
                id: "easy-typing-format-switch",
                name: "switch autoformat",
                callback: () => this.commandSwitch(),
                hotkeys: [{
                        modifiers: ['Ctrl'],
                        key: "tab"
                    }],
            });
            this.addCommand({
                id: "easy-typing-format-note",
                name: "format current note",
                callback: () => this.commandFormatNote(),
                hotkeys: [{
                        modifiers: ['Alt'],
                        key: "f"
                    }],
            });
            this.addSettingTab(new EasyTypingSettingTab(this.app, this));
            this.registerCodeMirror((codeMirrorEditor) => {
                codeMirrorEditor.on('keyup', this.handleKeyUp);
                codeMirrorEditor.on('keydown', this.handleKeyDown);
                codeMirrorEditor.on('beforeChange', this.beforeChange);
            });
        });
    }
    onunload() {
        console.log('unloading plugin');
        this.app.workspace.iterateCodeMirrors((codeMirrorEditor) => {
            codeMirrorEditor.off('keyup', this.handleKeyUp);
            codeMirrorEditor.off('keydown', this.handleKeyDown);
            codeMirrorEditor.off('beforeChange', this.beforeChange);
        });
    }
    commandSwitch() {
        this.settings.AutoFormatting = this.settings.AutoFormatting ? false : true;
        let status = this.settings.AutoFormatting ? 'on' : 'off';
        new obsidian.Notice('Autoformat is ' + status + '!');
    }
    commandFormatNote() {
        let activeLeaf = this.app.workspace.activeLeaf;
        let editor = activeLeaf.view.sourceMode.cmEditor;
        let typeArray = splitArticle(editor.getValue());
        for (let i = 0; i < typeArray.length; i++) {
            if (typeArray[i].type === LineType.text) {
                for (let j = typeArray[i].begin; j < typeArray[i].end; j++) {
                    let line = editor.getLine(j);
                    let newLine = formatLine(line, { line: j, ch: line.length }, this.settings)[0];
                    if (newLine != line) {
                        let start = { line: j, ch: 0 };
                        let end = { line: j, ch: line.length };
                        editor.replaceRange(newLine, start, end);
                    }
                }
            }
        }
        new obsidian.Notice('Format Note Done!');
    }
    commandFormatLine() {
        let activeLeaf = this.app.workspace.activeLeaf;
        let editor = activeLeaf.view.sourceMode.cmEditor;
        let cursor = editor.getCursor();
        let line = editor.getLine(cursor.line);
        let ret = formatLine(line, cursor, this.settings);
        let inlineChangeList = ret[2];
        if (inlineChangeList.length != 0) {
            let offset = 0;
            for (let i = 0; i < inlineChangeList.length; i++) {
                let changeBegin = {
                    line: cursor.line,
                    ch: inlineChangeList[i].begin + offset
                };
                let changeEnd = {
                    line: cursor.line,
                    ch: inlineChangeList[i].end + offset
                };
                offset += inlineChangeList[i].text.length - inlineChangeList[i].origin.length;
                editor.replaceRange(inlineChangeList[i].text, changeBegin, changeEnd);
            }
            editor.setCursor({
                line: cursor.line,
                ch: ret[1]
            });
            editor.focus();
        }
        this.prevCursor = editor.getCursor();
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}
class EasyTypingSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        // containerEl.createEl('h2', {text: 'Settings for Easy Typing.'});
        containerEl.createEl('a', { text: 'More detail is in Github: easy-typing-obsidian', href: 'https://github.com/Yaozhuwa/easy-typing-obsidian' });
        containerEl.createEl('h2', { text: '总开关 (Master Switch)' });
        new obsidian.Setting(containerEl)
            .setName("Auto formatting when typing")
            .setDesc("是否在编辑文档时自动格式化文本")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.AutoFormatting)
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.AutoFormatting = value;
                console.log("AutoFormatting:", value);
                yield this.plugin.saveSettings();
            }));
        });
        containerEl.createEl('h2', { text: '详细规则开关 (Sub Switches)' });
        new obsidian.Setting(containerEl)
            .setName("Space between Chinese and English/number")
            .setDesc("在中文和英文/数字间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.ChineseEnglishSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.ChineseEnglishSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Delete the Space between Chinese characters")
            .setDesc("在中文字符间去除空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.ChineseNoSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.ChineseNoSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between English with punctuate")
            .setDesc("在英文文本和标点间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.EnglishSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.EnglishSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Capitalize the first letter of every sentence")
            .setDesc("英文每个句首字母大写")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.Capitalization).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.Capitalization = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between number and English text")
            .setDesc("数字和标点间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.NumberSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.NumberSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between English braces and text")
            .setDesc("在英文小括号和文本间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.BraceSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.BraceSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between inline code and text")
            .setDesc("在 `行内代码` 和文本间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.InlineCodeSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.InlineCodeSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between inline formula and text")
            .setDesc("在 $行内公式$ 和文本间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.InlineFormulaSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.InlineFormulaSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between link and text")
            .setDesc("在 [[wikilink]] mdlink 和文本间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.LinkSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.LinkSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Smart Space between link and text")
            .setDesc("在 [[wikilink]] mdlink 和文本间智能空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.LinkSmartSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.LinkSmartSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Full-Width symbol input enhancement")
            .setDesc("全角符号输入增强")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.FullWidthCharacterEnhence).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.FullWidthCharacterEnhence = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("Space between User Defined Part(selected by RegExp) and text")
            .setDesc("在用户自定义区块(正则表达式选择)和文本之间空格")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.UserPartSpace).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.UserPartSpace = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("User Defined RegExp Switch")
            .setDesc("自定义正则表达式开关，匹配到的内容不进行格式化")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.UserDefinedRegSwitch).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.UserDefinedRegSwitch = value;
                yield this.plugin.saveSettings();
            }));
        });
        new obsidian.Setting(containerEl)
            .setName("User defined RegExp to ignore, one expression per line")
            .setDesc("用户自定义正则表达式，匹配到的内容不进行格式化，每行一个表达式，行尾不要随意加空格")
            .addTextArea((text) => text
            .setPlaceholder(':\\w*:\n{{.*?}}')
            .setValue(this.plugin.settings.UserDefinedRegExp)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.UserDefinedRegExp = value;
            if (this.plugin.settings.Debug)
                console.log("regExp changed:", value);
            yield this.plugin.saveSettings();
        })));
        containerEl.createEl('a', { text: 'RegExp: 正则表达式', href: 'https://javascript.ruanyifeng.com/stdlib/regexp.html#' });
        containerEl.createEl('h2', { text: 'Debug' });
        new obsidian.Setting(containerEl)
            .setName("Print debug info in console")
            .setDesc("在控制台输出调试信息")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.Debug).onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.Debug = value;
                yield this.plugin.saveSettings();
            }));
        });
    }
}

module.exports = EasyTypingPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20pIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxyXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcclxuICAgIHJldHVybiB0bztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcbiIsImltcG9ydCB7IEFwcCwgRWRpdG9yLCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFBvcywgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmVudW0gSW5saW5lVHlwZSB7dGV4dD0ndGV4dCcsIGNvZGU9J2NvZGUnLCBmb3JtdWxhPSdmb3JtdWxhJywgbGluaz0nbGluaycsIHVzZXI9J3VzZXItZGVmaW5lZCcsIG5vbmU9J25vbmUnfVxyXG5lbnVtIExpbmVUeXBlIHt0ZXh0PSd0ZXh0JywgY29kZT0nY29kZScsIGZvcm11bGE9J2Zvcm11bGEnLCBmcm9udG1hdHRlcj0nZnJvbnRtYXR0ZXInLCBub25lPSdub25lJ307XHJcblxyXG5pbnRlcmZhY2UgQXJ0aWNsZVBhcnRcclxue1xyXG4gICAgdHlwZTogTGluZVR5cGU7XHJcbiAgICBiZWdpbjogbnVtYmVyO1xyXG4gICAgZW5kOiBudW1iZXJcclxufVxyXG5cclxuaW50ZXJmYWNlIElubGluZVBhcnRcclxue1xyXG4gICAgY29udGVudDogc3RyaW5nLFxyXG4gICAgdHlwZTogSW5saW5lVHlwZSxcclxuICAgIGJlZ2luOiBudW1iZXIsXHJcbiAgICBlbmQ6IG51bWJlclxyXG59XHJcblxyXG5pbnRlcmZhY2UgSW5saW5lQ2hhbmdlXHJcbntcclxuICAgIHRleHQ6IHN0cmluZyxcclxuICAgIGJlZ2luOiBudW1iZXIsXHJcbiAgICBlbmQ6IG51bWJlcixcclxuICAgIG9yaWdpbjpzdHJpbmdcclxufVxyXG5cclxuaW50ZXJmYWNlIEZvcm1hdFNldHRpbmdzXHJcbntcclxuICAgIEF1dG9Gb3JtYXR0aW5nOiBib29sZWFuO1xyXG5cdENoaW5lc2VFbmdsaXNoU3BhY2U6IGJvb2xlYW47XHJcblx0Q2hpbmVzZU5vU3BhY2U6IGJvb2xlYW47XHJcblx0RW5nbGlzaFNwYWNlOiBib29sZWFuO1xyXG5cdENhcGl0YWxpemF0aW9uOiBib29sZWFuO1xyXG5cdEJyYWNlU3BhY2U6IGJvb2xlYW47XHJcblx0TnVtYmVyU3BhY2U6IGJvb2xlYW47XHJcblxyXG4gICAgSW5saW5lQ29kZVNwYWNlOiBib29sZWFuO1xyXG5cdElubGluZUZvcm11bGFTcGFjZTogYm9vbGVhbjtcclxuICAgIExpbmtTcGFjZTogYm9vbGVhbjtcclxuICAgIExpbmtTbWFydFNwYWNlOiBib29sZWFuO1xyXG5cclxuICAgIEZ1bGxXaWR0aENoYXJhY3RlckVuaGVuY2U6Ym9vbGVhbjtcclxuXHJcbiAgICBVc2VyRGVmaW5lZFJlZ0V4cDpzdHJpbmc7XHJcbiAgICBVc2VyRGVmaW5lZFJlZ1N3aXRjaDogYm9vbGVhbjtcclxuICAgIFVzZXJQYXJ0U3BhY2U6IGJvb2xlYW47XHJcblxyXG4gICAgRGVidWc6IGJvb2xlYW47XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEZvcm1hdFNldHRpbmdzID0ge1xyXG4gICAgQXV0b0Zvcm1hdHRpbmc6IHRydWUsXHJcblx0Q2hpbmVzZUVuZ2xpc2hTcGFjZTogdHJ1ZSxcclxuXHRDaGluZXNlTm9TcGFjZTogdHJ1ZSxcclxuXHRFbmdsaXNoU3BhY2U6IHRydWUsXHJcblx0Q2FwaXRhbGl6YXRpb246IHRydWUsXHJcblx0QnJhY2VTcGFjZTogdHJ1ZSxcclxuXHROdW1iZXJTcGFjZTogdHJ1ZSxcclxuXHJcbiAgICBJbmxpbmVDb2RlU3BhY2U6IHRydWUsXHJcblx0SW5saW5lRm9ybXVsYVNwYWNlOiB0cnVlLFxyXG5cdExpbmtTcGFjZTogdHJ1ZSxcclxuICAgIExpbmtTbWFydFNwYWNlOiB0cnVlLFxyXG5cclxuICAgIEZ1bGxXaWR0aENoYXJhY3RlckVuaGVuY2U6dHJ1ZSxcclxuICAgIFVzZXJEZWZpbmVkUmVnRXhwOic6XFxcXHcqOlxcbnt7Lio/fX0nLFxyXG4gICAgVXNlckRlZmluZWRSZWdTd2l0Y2g6IHRydWUsXHJcbiAgICBVc2VyUGFydFNwYWNlOnRydWUsXHJcbiAgICBEZWJ1ZzpmYWxzZVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMaW5lVHlwZShhcnRpY2xlOnN0cmluZywgbGluZTogbnVtYmVyKTpMaW5lVHlwZVxyXG57XHJcbiAgICBsZXQgdHlwZUFycmF5ID0gc3BsaXRBcnRpY2xlKGFydGljbGUpO1xyXG4gICAgZm9yKGxldCBpPTA7aTx0eXBlQXJyYXkubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZihsaW5lID49IHR5cGVBcnJheVtpXS5iZWdpbiAmJiBsaW5lPHR5cGVBcnJheVtpXS5lbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZUFycmF5W2ldLnR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMaW5lVHlwZUZyb21BcnRpY2xlUGFydHMobGluZTogbnVtYmVyLCB0eXBlQXJyYXk6IEFydGljbGVQYXJ0W10pOkxpbmVUeXBlXHJcbntcclxuICAgIGZvcihsZXQgaT0wO2k8dHlwZUFycmF5Lmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYobGluZSA+PSB0eXBlQXJyYXlbaV0uYmVnaW4gJiYgbGluZTx0eXBlQXJyYXlbaV0uZW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVBcnJheVtpXS50eXBlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc3BsaXRBcnRpY2xlKGFydGljbGU6c3RyaW5nKTogQXJ0aWNsZVBhcnRbXVxyXG57XHJcbiAgICBsZXQgcmV0QXJyYXk6IEFydGljbGVQYXJ0W10gPSBbXTtcclxuICAgIGxldCBsaW5lcyA9IGFydGljbGUuc3BsaXQoJ1xcbicpO1xyXG4gICAgbGV0IHJlZ051bGxMaW5lID0gL15cXHMqJC87XHJcbiAgICBsZXQgcmVnRm9ybXVsYUJlZ2luID0gL15cXHMqKFxcLSAoXFxbW3ggXVxcXSApPyk/XFwkXFwkLztcclxuICAgIGxldCByZWdGb3JtdWxhRW5kID0gL1xcJFxcJCQvO1xyXG4gICAgbGV0IHJlZ0NvZGVCZWdpbiA9IC9eXFxzKmBgYC87XHJcbiAgICBsZXQgcmVnQ29kZUVuZCA9IC9eXFxzKmBgYCQvO1xyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAvLyAxLiDliKTmlq0gZnJvbnRtYXR0ZXJcclxuICAgIGxldCBmcm9udE1hdHRlclBhcnQ6IEFydGljbGVQYXJ0O1xyXG4gICAgZm9yKGxldCBpPTA7aTxsaW5lcy5sZW5ndGg7aSsrKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHJlZ051bGxMaW5lLnRlc3QobGluZXNbaV0pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYobGluZXNbaV09PT0nLS0tJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaj1pKzE7IGo8bGluZXMubGVuZ3RoO2orKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYobGluZXNbal09PT0nLS0tJylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihpIT0wKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS50ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDppXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmcm9udE1hdHRlclBhcnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmZyb250bWF0dGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBqKzFcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goZnJvbnRNYXR0ZXJQYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGorMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ2luZGV4JywgaW5kZXgpO1xyXG5cclxuICAgIC8vIDIuIOmBjeWOhuihjOW+l+WIsCBMaW5lVHlwZSDliIbljLpcclxuICAgIHdoaWxlKGluZGV4PGxpbmVzLmxlbmd0aClcclxuICAgIHtcclxuICAgICAgICBpZihyZWdDb2RlQmVnaW4udGVzdChsaW5lc1tpbmRleF0pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGogPSBpbmRleCsxO1xyXG4gICAgICAgICAgICB3aGlsZShqPGxpbmVzLmxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYocmVnQ29kZUVuZC50ZXN0KGxpbmVzW2pdKSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGorKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjppbmRleCxcclxuICAgICAgICAgICAgICAgIGVuZDpqKzFcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGluZGV4ID0gaisxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHJlZ0Zvcm11bGFCZWdpbi50ZXN0KGxpbmVzW2luZGV4XSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgcmVnRm9ybXVsYU9uZUxpbmUgPSAvKD88IVxcXFwpXFwkXFwkKD8hIClbXl0qPyg/PCEgKSg/PCFcXFxcKVxcJFxcJC9nO1xyXG4gICAgICAgICAgICBpZihyZWdGb3JtdWxhT25lTGluZS50ZXN0KGxpbmVzW2luZGV4XSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmZvcm11bGEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogaW5kZXgrMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBsZXQgaiA9IGluZGV4KzE7XHJcbiAgICAgICAgICAgICAgICB3aGlsZShqPGxpbmVzLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZWdGb3JtdWxhRW5kLnRlc3QobGluZXNbal0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS5mb3JtdWxhLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDpqKzFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBqKzE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGogPSBpbmRleCsxO1xyXG4gICAgICAgICAgICBmb3IoO2o8bGluZXMubGVuZ3RoO2orKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYocmVnQ29kZUJlZ2luLnRlc3QobGluZXNbal0pIHx8IHJlZ0Zvcm11bGFCZWdpbi50ZXN0KGxpbmVzW2pdKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBlbmQ6alxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaW5kZXggPSBqO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0QXJyYXk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cmluZ0RlbGV0ZUF0KHN0cjogc3RyaW5nLCBpbmRleDogbnVtYmVyKTpzdHJpbmdcclxue1xyXG4gICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgaW5kZXgpK3N0ci5zdWJzdHJpbmcoaW5kZXgrMSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cmluZ0luc2VydEF0KHN0cjpzdHJpbmcsIGluZGV4OiBudW1iZXIsIHM6IHN0cmluZyk6c3RyaW5nXHJcbntcclxuICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGluZGV4KStzK3N0ci5zdWJzdHJpbmcoaW5kZXgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzcGxpdExpbmUobGluZTogc3RyaW5nLCByZWdFeHBzPzpzdHJpbmcpOiBJbmxpbmVQYXJ0W11cclxue1xyXG4gICAgbGV0IHJlZ0lubGluZU1hcmsgPSAvKD88IVxcXFwpXFwkfCg/PCFcXFxcKVxcYC9nO1xyXG4gICAgbGV0IHJlZ0Zvcm11bGFJbmxpbmUgPSAvKD88IVxcXFwpXFwkKD8hIClbXl0rPyg/PCEgKSg/PCFcXFxcKVxcJC9nO1xyXG4gICAgbGV0IHJlZ0Zvcm11bGFCbG9jayA9IC8oPzwhXFxcXClcXCRcXCQoPyEgKVteXSo/KD88ISApKD88IVxcXFwpXFwkXFwkL2c7XHJcbiAgICBsZXQgcmVnQ29kZSA9IC8oPzwhXFxcXClgW15dKj8oPzwhXFxcXClgL2c7XHJcbiAgICBsZXQgbWFya1F1ZXVlOlJlZ0V4cEV4ZWNBcnJheVtdID0gW107XHJcbiAgICBsZXQgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYTogSW5saW5lUGFydFtdID0gW107XHJcblxyXG4gICAgd2hpbGUodHJ1ZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgbWF0Y2ggPSByZWdJbmxpbmVNYXJrLmV4ZWMobGluZSk7XHJcbiAgICAgICAgaWYoIW1hdGNoKSBicmVhaztcclxuICAgICAgICBtYXJrUXVldWUucHVzaChtYXRjaCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRleHRCZWdpbkluZGV4ID0gMDtcclxuICAgIHdoaWxlKG1hcmtRdWV1ZS5sZW5ndGghPTApXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IG1hcmsgPSBtYXJrUXVldWUuc2hpZnQoKTtcclxuICAgICAgICBpZihtYXJrLmluZGV4PHRleHRCZWdpbkluZGV4KSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgaWYobWFya1swXT09PSckJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBtYXRjaEZvcm11bGFCZWdpbkluZGV4Om51bWJlcjtcclxuICAgICAgICAgICAgbGV0IG1hdGNoRm9ybXVsYUxhc3RJbmRleDpudW1iZXI7XHJcbiAgICAgICAgICAgIHJlZ0Zvcm11bGFCbG9jay5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hCbG9ja0Zvcm11bGEgPSByZWdGb3JtdWxhQmxvY2suZXhlYyhsaW5lKTtcclxuICAgICAgICAgICAgaWYobWF0Y2hCbG9ja0Zvcm11bGEgJiYgbWF0Y2hCbG9ja0Zvcm11bGEuaW5kZXg9PT1tYXJrLmluZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaEZvcm11bGFCZWdpbkluZGV4ID0gbWF0Y2hCbG9ja0Zvcm11bGEuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBtYXRjaEZvcm11bGFMYXN0SW5kZXggPSByZWdGb3JtdWxhQmxvY2subGFzdEluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVnRm9ybXVsYUlubGluZS5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoSW5saW5lRm9ybXVsYSA9IHJlZ0Zvcm11bGFJbmxpbmUuZXhlYyhsaW5lKTtcclxuICAgICAgICAgICAgICAgIGlmKG1hdGNoSW5saW5lRm9ybXVsYSAmJiBtYXRjaElubGluZUZvcm11bGEuaW5kZXg9PT1tYXJrLmluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoRm9ybXVsYUJlZ2luSW5kZXggPSBtYXRjaElubGluZUZvcm11bGEuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3JtdWxhTGFzdEluZGV4ID0gcmVnRm9ybXVsYUlubGluZS5sYXN0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmsqHljLnphY3liLDvvIzliJkgY29udGludWVcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYobWFyay5pbmRleD50ZXh0QmVnaW5JbmRleClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcodGV4dEJlZ2luSW5kZXgsIG1hcmsuaW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBtYXJrLmluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGxpbmUuc3Vic3RyaW5nKG1hdGNoRm9ybXVsYUJlZ2luSW5kZXgsIG1hdGNoRm9ybXVsYUxhc3RJbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLmZvcm11bGEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46bWF0Y2hGb3JtdWxhQmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6bWF0Y2hGb3JtdWxhTGFzdEluZGV4XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRleHRCZWdpbkluZGV4ID0gbWF0Y2hGb3JtdWxhTGFzdEluZGV4O1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihtYXJrWzBdPT09J2AnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IG1hdGNoQ29kZUJlZ2luSW5kZXg6bnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hDb2RlTGFzdEluZGV4Om51bWJlcjtcclxuICAgICAgICAgICAgcmVnQ29kZS5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hJbmxpbmVDb2RlID0gcmVnQ29kZS5leGVjKGxpbmUpO1xyXG4gICAgICAgICAgICBpZihtYXRjaElubGluZUNvZGUgJiYgbWF0Y2hJbmxpbmVDb2RlLmluZGV4PT09bWFyay5pbmRleClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hDb2RlQmVnaW5JbmRleCA9IG1hdGNoSW5saW5lQ29kZS5pbmRleDtcclxuICAgICAgICAgICAgICAgIG1hdGNoQ29kZUxhc3RJbmRleCA9IHJlZ0NvZGUubGFzdEluZGV4O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKG1hcmsuaW5kZXg+dGV4dEJlZ2luSW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBsaW5lLnN1YnN0cmluZyh0ZXh0QmVnaW5JbmRleCwgbWFyay5pbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOklubGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbWFyay5pbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcobWF0Y2hDb2RlQmVnaW5JbmRleCwgbWF0Y2hDb2RlTGFzdEluZGV4KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOm1hdGNoQ29kZUJlZ2luSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDptYXRjaENvZGVMYXN0SW5kZXhcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJlZ2luSW5kZXggPSBtYXRjaENvZGVMYXN0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYodGV4dEJlZ2luSW5kZXghPWxpbmUubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICAgIGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGEucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcodGV4dEJlZ2luSW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjp0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgIGVuZDpsaW5lLmxlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBsZXQgcmV0QXJyYXk6IElubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgZm9yKGxldCBpPTA7aTxhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYoYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS50eXBlIT1JbmxpbmVUeXBlLnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXRBcnJheS5wdXNoKGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGFbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgdGVtcEFycmF5OklubGluZVBhcnRbXTtcclxuICAgICAgICAgICAgaWYocmVnRXhwcylcclxuICAgICAgICAgICAgICAgIHRlbXBBcnJheSA9IHNwbGl0VGV4dFdpdGhMaW5rQW5kVXNlckRlZmluZWQoYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS5jb250ZW50LCByZWdFeHBzKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGVtcEFycmF5ID0gc3BsaXRUZXh0V2l0aExpbmtBbmRVc2VyRGVmaW5lZChhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGVtcEFycmF5LmZvckVhY2goaXRlbT0+e1xyXG4gICAgICAgICAgICAgICAgaXRlbS5iZWdpbiArPSBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5lbmQgKz0gYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS5iZWdpbjtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0QXJyYXk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hdGNoV2l0aFJlZyh0ZXh0OnN0cmluZywgcmVnRXhwOlJlZ0V4cCwgdHlwZTogSW5saW5lVHlwZSwgaW5saW5lVHlwZUFycmF5OklubGluZVBhcnRbXSwgY2hlY2tBcnJheT1mYWxzZSk6SW5saW5lUGFydFtdXHJcbntcclxuICAgIGxldCByZXRBcnJheSA9IGlubGluZVR5cGVBcnJheTtcclxuICAgIGxldCBtYXRjaEFycmF5OklubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnYmVmb3JlLS0tLS0tLS0tLS1cXG4nLHJldEFycmF5KVxyXG4gICAgd2hpbGUodHJ1ZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgbWF0Y2ggPSByZWdFeHAuZXhlYyh0ZXh0KTsgXHJcbiAgICAgICAgaWYoIW1hdGNoKSBicmVhaztcclxuICAgICAgICBsZXQgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIOajgOafpeWGsueqgVxyXG4gICAgICAgIGlmKGNoZWNrQXJyYXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IobGV0IGk9MDtpPHJldEFycmF5Lmxlbmd0aDtpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKG1hdGNoLmluZGV4PD1yZXRBcnJheVtpXS5iZWdpbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZWdFeHAubGFzdEluZGV4IDw9IHJldEFycmF5W2ldLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdFeHAubGFzdEluZGV4IDw9IHJldEFycmF5W2ldLmVuZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ0V4cC5sYXN0SW5kZXggPiByZXRBcnJheVtpXS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVtb3ZlQ291bnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaj1pKzE7IGo8cmV0QXJyYXkubGVuZ3RoO2orKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVnRXhwLmxhc3RJbmRleDw9cmV0QXJyYXlbal0uYmVnaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ291bnQgPSBqLWk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdFeHAubGFzdEluZGV4PHJldEFycmF5W2pdLmVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWxpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkuc3BsaWNlKGksIHJlbW92ZUNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihtYXRjaC5pbmRleD5yZXRBcnJheVtpXS5iZWdpbiAmJiBtYXRjaC5pbmRleDxyZXRBcnJheVtpXS5lbmQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZighdmFsaWQpIGNvbnRpbnVlO1xyXG4gICAgICAgIG1hdGNoQXJyYXkucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogbWF0Y2hbMF0sXHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgYmVnaW46IG1hdGNoLmluZGV4LFxyXG4gICAgICAgICAgICAgICAgZW5kOiByZWdFeHAubGFzdEluZGV4XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5jb25jYXQobWF0Y2hBcnJheSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnQWZ0ZXI9PT09PT09PT09PVxcbicsIHJldEFycmF5KTtcclxuICAgIHJldHVybiByZXRBcnJheTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNwbGl0VGV4dFdpdGhMaW5rQW5kVXNlckRlZmluZWQodGV4dDogc3RyaW5nLCByZWdFeHBzPzpzdHJpbmcpOklubGluZVBhcnRbXVxyXG57XHJcbiAgICBsZXQgcmV0QXJyYXk6IElubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgbGV0IHJlZ1dpa2lMaW5rID0gL1xcIT9cXFtcXFtbXlxcW1xcXV0qP1xcXVxcXS9nO1xyXG4gICAgbGV0IHJlZ01kTGluayA9IC9cXCE/XFxbW15cXFtcXF1dKj9cXF1cXChbXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKlxcKS9nO1xyXG4gICAgLy8gbGV0IHJlZ0JhcmVMaW5rID0gLyhodHRwcz98b2JzaWRpYW58em90ZXJvKTpcXC9cXC9bXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKy9nO1xyXG4gICAgbGV0IHJlZ0JhcmVMaW5rID0gLyhodHRwcz86XFwvXFwvfG9ic2lkaWFuOlxcL1xcL3x6b3Rlcm86XFwvXFwvfHd3dy4pW15cXHNcXClcXChcXFtcXF1cXHtcXH0nXSsvZztcclxuXHJcbiAgICAvLyAxLiDljLnphY13aWtpbGlua1xyXG4gICAgcmV0QXJyYXkgPSBtYXRjaFdpdGhSZWcodGV4dCwgcmVnV2lraUxpbmssIElubGluZVR5cGUubGluaywgcmV0QXJyYXkpO1xyXG4gICAgLy8gMi4g5Yy56YWNbWRsaW5rXHJcbiAgICByZXRBcnJheSA9IG1hdGNoV2l0aFJlZyh0ZXh0LCByZWdNZExpbmssIElubGluZVR5cGUubGluaywgcmV0QXJyYXkpO1xyXG5cclxuICAgIC8vIDMuIOWMuemFjeeUqOaIt+iHquWumuS5ieato+WImVxyXG4gICAgbGV0IHJlZ0V4cExpc3Q6IFJlZ0V4cFtdID0gW107XHJcbiAgICBpZihyZWdFeHBzKVxyXG4gICAge1xyXG4gICAgICAgIGxldCByZWdzID0gcmVnRXhwcy5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxyZWdzLmxlbmd0aDtpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgcmVnTnVsbCA9IC9eXFxzKiQvZztcclxuICAgICAgICAgICAgaWYocmVnTnVsbC50ZXN0KHJlZ3NbaV0pKSBjb250aW51ZTtcclxuICAgICAgICAgICAgbGV0IGlzVmFsaWRSZWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnVGVtcCA9IG5ldyBSZWdFeHAocmVnc1tpXSwgJ2cnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoKGVycm9yKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpc1ZhbGlkUmVnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQmFkIFJlZzonLCByZWdzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoaXNWYWxpZFJlZykgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlZ0V4cExpc3QucHVzaChuZXcgUmVnRXhwKHJlZ3NbaV0sICdnJykpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0dvb2QgUmVnOicsIHJlZ3NbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZWdMZW4gPSByZWdFeHBMaXN0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxyZWdMZW47aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0QXJyYXkgPSBtYXRjaFdpdGhSZWcodGV4dCwgcmVnRXhwTGlzdFtpXSwgSW5saW5lVHlwZS51c2VyLCByZXRBcnJheSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyA0LiDljLnphY3nuq/pk77mjqVcclxuICAgIHJldEFycmF5ID0gbWF0Y2hXaXRoUmVnKHRleHQsIHJlZ0JhcmVMaW5rLCBJbmxpbmVUeXBlLmxpbmssIHJldEFycmF5LCB0cnVlKTtcclxuXHJcbiAgICAvLyA1LiDlvpfliLDliankvZnnmoTmlofmnKzpg6jliIZcclxuICAgIHJldEFycmF5ID0gcmV0QXJyYXkuc29ydCgoYSwgYik6bnVtYmVyPT5hLmJlZ2luLWIuYmVnaW4pO1xyXG5cclxuICAgIGxldCB0ZXh0QXJyYXkgOiBJbmxpbmVQYXJ0W10gPSBbXTtcclxuICAgIGxldCB0ZXh0QmVnaW4gPSAwO1xyXG4gICAgbGV0IHRleHRFbmQgPSAwO1xyXG4gICAgZm9yKGxldCBpPTA7aTxyZXRBcnJheS5sZW5ndGg7aSsrKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRleHRCZWdpbjxyZXRBcnJheVtpXS5iZWdpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHRFbmQgPSByZXRBcnJheVtpXS5iZWdpbjtcclxuICAgICAgICAgICAgdGV4dEFycmF5LnB1c2goXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGV4dC5zdWJzdHJpbmcodGV4dEJlZ2luLCB0ZXh0RW5kKSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IHRleHRCZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHRleHRFbmRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGV4dEJlZ2luID0gcmV0QXJyYXlbaV0uZW5kO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRleHRCZWdpbiE9dGV4dC5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgICAgdGV4dEFycmF5LnB1c2goXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRleHQuc3Vic3RyaW5nKHRleHRCZWdpbiwgdGV4dC5sZW5ndGgpLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogSW5saW5lVHlwZS50ZXh0LFxyXG4gICAgICAgICAgICAgICAgYmVnaW46IHRleHRCZWdpbixcclxuICAgICAgICAgICAgICAgIGVuZDogdGV4dC5sZW5ndGhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNi4g5ZCI5bm25paH5pys6YOo5YiG5ZKM5YW25LuW6YOo5YiGXHJcbiAgICByZXRBcnJheSA9IHJldEFycmF5LmNvbmNhdCh0ZXh0QXJyYXkpO1xyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XHJcbiAgICByZXR1cm4gcmV0QXJyYXlcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0TGluZShsaW5lOiBzdHJpbmcsIGN1ckN1cnNvcjogQ29kZU1pcnJvci5Qb3NpdGlvbiwgc2V0dGluZ3M6IEZvcm1hdFNldHRpbmdzLCBwcmV2Q3Vyc29yPzogQ29kZU1pcnJvci5Qb3NpdGlvbik6W3N0cmluZywgbnVtYmVyLCBJbmxpbmVDaGFuZ2VbXV18bnVsbFxyXG57XHJcbiAgICBsZXQgY2ggPSBjdXJDdXJzb3IuY2g7XHJcbiAgICBpZihsaW5lPT09JycpIHJldHVybiBbJycsIDAsIFtdXTtcclxuXHJcbiAgICAvLyAxLiDliJLliIbkuIDooYzmloflrZfnmoTlhoXpg6jkuI3lkIzmqKHlnZfljLrln59cclxuICAgIGxldCBsaW5lUGFydHM6SW5saW5lUGFydFtdO1xyXG4gICAgaWYoc2V0dGluZ3MuVXNlckRlZmluZWRSZWdTd2l0Y2gpXHJcbiAgICB7XHJcbiAgICAgICAgbGluZVBhcnRzID0gc3BsaXRMaW5lKGxpbmUsIHNldHRpbmdzLlVzZXJEZWZpbmVkUmVnRXhwKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICBsaW5lUGFydHMgPSBzcGxpdExpbmUobGluZSk7XHJcbiAgICB9XHJcbiAgICAvLyBjb25zb2xlLmxvZyhsaW5lUGFydHMpO1xyXG5cclxuICAgIC8vIOWkh+S7veWOn+adpeeahGxpbmVQYXJ0cywg5rex5ou36LSdXHJcbiAgICBsZXQgbGluZVBhcnRzT3JpZ2luID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShsaW5lUGFydHMpKTtcclxuICAgIGxldCBpbmxpbmVDaGFuZ2VMaXN0OklubGluZUNoYW5nZVtdID0gW107XHJcbiAgICBcclxuICAgIGxldCBjdXJzb3JMaW5lUGFydEluZGV4ID0gLTE7XHJcbiAgICBsZXQgY3Vyc29yUmVsYXRpdmVJbmRleCA9IC0xO1xyXG4gICAgbGV0IHJlc3VsdEN1cnNvckNoID0gMDsgICAgIC8vIOi+k+WHuueahOWFieagh+S9jee9rlxyXG5cclxuICAgIC8vIDIuIOaJvuWIsOWFieagh+aJgOWcqOeahOmDqOWIhu+8jOWmguaenOaYryBJbmxpbmVQYXJ0LnRleHTvvIzliJnlnKjlhYnmoIflpITmj5LlhaUnXFwwJ+adpeagh+iusOWFieagh+S9jee9rlxyXG4gICAgZm9yKGxldCBpPTA7aTxsaW5lUGFydHMubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZihjaD5saW5lUGFydHNbaV0uYmVnaW4gJiYgY2g8PWxpbmVQYXJ0c1tpXS5lbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjdXJzb3JMaW5lUGFydEluZGV4ID0gaTtcclxuICAgICAgICAgICAgY3Vyc29yUmVsYXRpdmVJbmRleCA9IGNoLWxpbmVQYXJ0c1tpXS5iZWdpbjtcclxuICAgICAgICAgICAgaWYobGluZVBhcnRzW2ldLnR5cGU9PT1JbmxpbmVUeXBlLnRleHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gc3RyaW5nSW5zZXJ0QXQobGluZVBhcnRzW2ldLmNvbnRlbnQsIGN1cnNvclJlbGF0aXZlSW5kZXgsICdcXDAnKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHRMaW5lID0gJyc7XHJcbiAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgIC8vIOS/neWtmOWJjeS4gOmDqOWIhueahOWMuuWdl+exu+Wei++8jElubGluZVR5cGUubm9uZSDku6PooajkuIDooYznmoTlvIDlp4tcclxuICAgIGxldCBwcmV2UGFydFR5cGU6c3RyaW5nID0gSW5saW5lVHlwZS5ub25lO1xyXG4gICAgbGV0IHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XHJcblxyXG4gICAgLy8gMy4g6YGN5Y6G5q+P5Liq6KGM6YOo5YiG77yM6L+b6KGM5qC85byP5YyW5aSE55CGXHJcbiAgICBmb3IobGV0IGk9MDtpPGxpbmVQYXJ0cy5sZW5ndGg7aSsrKVxyXG4gICAge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGlubGluZUxpc3RbaV0pO1xyXG5cclxuICAgICAgICAvLyAzLjEg5aaC5p6c6KGM5YaF56ys5LiA6YOo5YiG5Li65paH5pys77yM5YiZ5aSE55CG5Y+l6aaW5a2X5q+N5aSn5YaZ55qE6YOo5YiGXHJcbiAgICAgICAgaWYoaT09PTAgJiYgbGluZVBhcnRzW2ldLnR5cGU9PT1JbmxpbmVUeXBlLnRleHQgJiYgc2V0dGluZ3MuQ2FwaXRhbGl6YXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyAzLjEuMSDlpoLmnpwgcHJldkN1cnNvciDkuJTlhYnmoIfkuI3lnKjmraTpg6jliIbvvIzliJnot7Pov4dcclxuICAgICAgICAgICAgaWYocHJldkN1cnNvciAmJiBjdXJzb3JMaW5lUGFydEluZGV4IT0wKXt9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ0ZpcnN0U2VudGVuY2UgPSAvXlxccyooXFwtIChcXFtbeCBdXFxdICk/KT9bYS16XS9nO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ0hlYWRlclNlbnRlbmNlID0gL14jKyBbYS16XS9nO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRjb3B5ID0gbGluZVBhcnRzWzBdLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSByZWdGaXJzdFNlbnRlbmNlLmV4ZWModGV4dGNvcHkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoSGVhZGVyID0gcmVnSGVhZGVyU2VudGVuY2UuZXhlYyh0ZXh0Y29weSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZHN0Q2hhckluZGV4ID0gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYobWF0Y2gpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHN0Q2hhckluZGV4ID0gcmVnRmlyc3RTZW50ZW5jZS5sYXN0SW5kZXgtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYobWF0Y2hIZWFkZXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHN0Q2hhckluZGV4ID0gcmVnSGVhZGVyU2VudGVuY2UubGFzdEluZGV4LTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIXByZXZDdXJzb3Ipe31cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldkN1cnNvci5saW5lPT09Y3VyQ3Vyc29yLmxpbmUgJiYgZHN0Q2hhckluZGV4Pj1wcmV2Q3Vyc29yLmNoICYmIGRzdENoYXJJbmRleDxjdXJDdXJzb3IuY2gpe31cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgZHN0Q2hhckluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZHN0Q2hhckluZGV4IT0tMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbMF0uY29udGVudCA9IHRleHRjb3B5LnN1YnN0cmluZygwLCBkc3RDaGFySW5kZXgpK3RleHRjb3B5LmNoYXJBdChkc3RDaGFySW5kZXgpLnRvVXBwZXJDYXNlKCkrdGV4dGNvcHkuc3Vic3RyaW5nKGRzdENoYXJJbmRleCsxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAzLjIg5YiG5Yir5aSE55CG5q+P56eN5Yy65Z2X5oOF5Ya1XHJcbiAgICAgICAgc3dpdGNoKGxpbmVQYXJ0c1tpXS50eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gMy4yLjEg5aSE55CG5paH5pys5Yy65Z2XXHJcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdCZWZvcmUnLCBpLCBsaW5lUGFydHNbaV0uY29udGVudClcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjQg5aSE55CG5Y+l6aaW5a2X5q+N5aSn5YaZXHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5DYXBpdGFsaXphdGlvbilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgcmVnID0gL1tcXC5cXD9cXCHjgILvvIHvvJ9dKFtcXHNdKilbYS16XS9nO1xyXG5cdFx0XHRcdFx0d2hpbGUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHJlZy5leGVjKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighbWF0Y2gpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEluZGV4ID0gcmVnLmxhc3RJbmRleC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcmV2Q3Vyc29yLCBjdXJDdXJzb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighcHJldkN1cnNvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCB0ZW1wSW5kZXgpICsgY29udGVudC5jaGFyQXQodGVtcEluZGV4KS50b1VwcGVyQ2FzZSgpICsgY29udGVudC5zdWJzdHJpbmcocmVnLmxhc3RJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2Q3Vyc29yICYmIGN1cnNvckxpbmVQYXJ0SW5kZXg9PT1pICYmIHByZXZDdXJzb3IubGluZT09PWN1ckN1cnNvci5saW5lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0ZW1wSW5kZXg+PXByZXZDdXJzb3IuY2gtb2Zmc2V0ICYmIHRlbXBJbmRleDxjdXJDdXJzb3IuY2gtb2Zmc2V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gY29udGVudC5zdWJzdHJpbmcoMCwgdGVtcEluZGV4KSArIGNvbnRlbnQuY2hhckF0KHRlbXBJbmRleCkudG9VcHBlckNhc2UoKSArIGNvbnRlbnQuc3Vic3RyaW5nKHJlZy5sYXN0SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjEg5aSE55CG5Lit6Iux5paH5LmL6Ze056m65qC8XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5DaGluZXNlRW5nbGlzaFNwYWNlKXtcclxuXHRcdFx0XHRcdGxldCByZWcxPS8oW0EtWmEtejAtOSxcXC47XFw/OiFdKShbXFx1NGUwMC1cXHU5ZmE1XSspL2dpO1xyXG5cdFx0XHRcdFx0bGV0IHJlZzI9LyhbXFx1NGUwMC1cXHU5ZmE1XSspKFtBLVphLXowLTldKS9naTtcclxuXHRcdFx0XHRcdGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZzEsIFwiJDEgJDJcIikucmVwbGFjZShyZWcyLCBcIiQxICQyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuXHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjIg5aSE55CG5Lit5paH6Ze05peg56m65qC8XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5DaGluZXNlTm9TcGFjZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgcmVnPS8oW1xcdTRlMDAtXFx1OWZhNe+8jOOAguOAge+8m+KAmOKAmeOAiuOAi10rKShcXHMrKShbXFx1NGUwMC1cXHU5ZmE177yM44CC44CB77yb4oCY4oCZ44CK44CLXSspL2c7XHJcblx0XHRcdFx0XHR3aGlsZShyZWcuZXhlYyhjb250ZW50KSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0bGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnLCBcIiQxJDNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGV4dC4zIOWkhOeQhuiLseaWh+Wtl+avjeS4juagh+eCuemXtOepuuagvFxyXG4gICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuRW5nbGlzaFNwYWNlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciByZWcgPSAvKFssXFwuO1xcPzpcXCFdKShbQS1aYS16XSkvZ2k7XHJcblx0XHRcdFx0XHRsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcsIFwiJDEgJDJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG5cdFx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjUg5aSE55CG6Iux5paH5ous5Y+35LiO5aSW6YOo5paH5pys56m65qC8XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5CcmFjZVNwYWNlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGxldCByZWcxID0gLyhcXCkpKFtBLVphLXowLTlcXHU0ZTAwLVxcdTlmYTVdKykvZ2k7XHJcblx0XHRcdFx0XHRsZXQgcmVnMiA9IC8oW0EtWmEtejAtOVxcdTRlMDAtXFx1OWZhNTosXFwuXFw/J10rKShcXCgpL2dpO1xyXG5cdFx0XHRcdFx0bGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnMSwgXCIkMSAkMlwiKS5yZXBsYWNlKHJlZzIsIFwiJDEgJDJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG5cdFx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjYg5aSE55CG5pWw5a2X5LiO5qCH54K555qE56m65qC8XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5OdW1iZXJTcGFjZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRsZXQgcmVnMSA9IC8oWyw7XFw/OlxcIVxcXVxcfV0pKFswLTldKS9nO1xyXG5cdFx0XHRcdFx0bGV0IHJlZzIgPSAvKFswLTldKShbXFxbXFx7XSkvZztcclxuICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcxLCBcIiQxICQyXCIpLnJlcGxhY2UocmVnMiwgXCIkMSAkMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcblx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgLy8gVGV4dC43IOW+l+WIsOaWh+acrOmDqOWIhuaYr+WQpuS7peepuueZveespuW8gOWni+aIlue7k+adn++8jOeUqOadpeWIpOaWreWQjue7reaWh+acrOWJjeWQjuaYr+WQpumcgOimgea3u+WKoOepuuagvFxyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ1N0YXJ0V2l0aFNwYWNlID0gL15cXDA/W1xccyxcXC47XFw/XFwh77yM44CC77yb77yf77yBXFxdXFwpXFx9XS87XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnRW5kV2l0aFNwYWNlID0gL1tcXHPvvIzjgILvvJrvvJ/vvIFcXFtcXChcXHtdXFwwPyQvO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRTdGFydFdpdGhTcGFjZSA9IHJlZ1N0YXJ0V2l0aFNwYWNlLnRlc3QoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dEVuZFdpdGhTcGFjZSA9IHJlZ0VuZFdpdGhTcGFjZS50ZXN0KGNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdNZWRpYW4nLCBpLCBsaW5lUGFydHNbaV0uY29udGVudClcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0Ljgg5qC55o2u5YmN5LiA6YOo5YiG55qE5Yy65Z2X57G75Z6L5aSE55CG56m65qC85re75Yqg55qE6Zeu6aKYXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuY29kZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlICYmICF0ZXh0U3RhcnRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlICYmICF0ZXh0U3RhcnRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NtYXJ0U3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ1Rlc3RXaWtpTGluayA9IC9eXFxbXFxbLitcXF1cXF0kLztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlZ1Rlc3RXaWtpTGluay50ZXN0KGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFyQXRMaW5rRW5kID0gbGluZVBhcnRzW2ktMV0uY29udGVudC5jaGFyQXQobGluZVBhcnRzW2ktMV0uY29udGVudC5sZW5ndGgtMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdFRleHRCZWdpbiA9IGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcFN0ciA9IGNoYXJBdExpbmtFbmQrY2hhckF0VGV4dEJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcxPS9bQS1aYS16MC05LC47XFw/OlxcIV1bXFx1NGUwMC1cXHU5ZmE1XS9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcyPS9bXFx1NGUwMC1cXHU5ZmE1XVtAQS1aYS16MC05XS9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWczID0gL1tBLVphLXowLTksLjs/OiFdW0EtWmEtejAtOV0vZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnNCA9IC9bLDtcXD86XFwhXFxdXFx9XVswLTldL2c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVnMS50ZXN0KHRlbXBTdHIpIHx8IHJlZzIudGVzdCh0ZW1wU3RyKSB8fCByZWczLnRlc3QodGVtcFN0cikgfHwgcmVnNC50ZXN0KHRlbXBTdHIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZighc2V0dGluZ3MuTGlua1NtYXJ0U3BhY2UgJiYgc2V0dGluZ3MuTGlua1NwYWNlICYmICF0ZXh0U3RhcnRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSAmJiAhdGV4dFN0YXJ0V2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9ICcgJytjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGV4dC45IOWmguaenOWFieagh+WcqOivpeWMuuWdl++8jOWImeiuoeeul+acgOe7iOWFieagh+eahOS9jee9rlxyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gY3Vyc29yTGluZVBhcnRJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVnID0gJ1xcMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBjb250ZW50LnNlYXJjaChyZWcpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBuO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWIoOmZpCBcXDBcclxuICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IHN0cmluZ0RlbGV0ZUF0KGNvbnRlbnQsIG4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0FmdGVyJywgaSwgbGluZVBhcnRzW2ldLmNvbnRlbnQpXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjEwIOWPmOmHj+abtOaWsFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBwcmV2UGFydFR5cGUgPSBJbmxpbmVUeXBlLnRleHQ7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IHRleHRFbmRXaXRoU3BhY2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDMuMi4yIOWkhOeQhuihjOWGheS7o+eggeWdl+mDqOWIhlxyXG4gICAgICAgICAgICBjYXNlIElubGluZVR5cGUuY29kZTpcclxuICAgICAgICAgICAgICAgIC8vIENvZGUuMSDmoLnmja7liY3kuIDljLrlnZfnsbvlnovlkoxzZXR0aW5nc+a3u+WKoOepuuagvFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoKHByZXZQYXJ0VHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnRleHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUNvZGVTcGFjZSAmJiAhcHJldlRleHRFbmRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuY29kZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS51c2VyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlIHx8IHNldHRpbmdzLklubGluZUNvZGVTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDb2RlLjIg5aaC5p6c5YWJ5qCH5Zyo6K+l5Yy65Z2X77yM5YiZ6K6h566X5pyA57uI5YWJ5qCH55qE5L2N572uXHJcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEN1cnNvckNoID0gb2Zmc2V0ICsgY3Vyc29yUmVsYXRpdmVJbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENvZGUuMyDlj5jph4/mm7TmlrBcclxuICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS5jb2RlO1xyXG4gICAgICAgICAgICAgICAgcHJldlRleHRFbmRXaXRoU3BhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy8gMy4yLjMg5aSE55CG6KGM5YaF5YWs5byP55qE6YOo5YiGXHJcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxyXG4gICAgICAgICAgICAgICAgLy8gRm9ybXVsYS4xIOagueaNruWJjeS4gOWMuuWdl+exu+Wei+WSjHNldHRpbmdz5re75Yqg56m65qC8XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudGV4dDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRm9ybXVsYS4yIOWmguaenOWFieagh+WcqOivpeWMuuWdl++8jOWImeiuoeeul+acgOe7iOWFieagh+eahOS9jee9rlxyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gY3Vyc29yTGluZVBhcnRJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIGN1cnNvclJlbGF0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBGb3JtdWxhLjMg5Y+Y6YeP5pu05pawXHJcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUuZm9ybXVsYTtcclxuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIC8vIDMuMi40IOWkhOeQhuihjOWGhemTvuaOpeeahOmDqOWIhlxyXG4gICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcclxuICAgICAgICAgICAgICAgIC8vIExpbmsuMSDmoLnmja7liY3kuIDljLrlnZfnsbvlnovlkoxzZXR0aW5nc+a3u+WKoOepuuagvFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoKHByZXZQYXJ0VHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnRleHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTbWFydFNwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ1Rlc3RXaWtpTGluayA9IC9eXFxbXFxbLitcXF1cXF0kLztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlZ1Rlc3RXaWtpTGluay50ZXN0KGxpbmVQYXJ0c1tpXS5jb250ZW50KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckF0VGV4dEVuZCA9IGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQuY2hhckF0KGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQubGVuZ3RoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFyQXRMaW5rQmVnaW4gPSBsaW5lUGFydHNbaV0uY29udGVudC5jaGFyQXQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBTdHIgPSBjaGFyQXRUZXh0RW5kK2NoYXJBdExpbmtCZWdpbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnMT0vW0EtWmEtejAtOSwuO1xcPzpcXCFdW1xcdTRlMDAtXFx1OWZhNV0vZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnMj0vW1xcdTRlMDAtXFx1OWZhNV1bQEEtWmEtejAtOV0vZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnMyA9IC9bQS1aYS16MC05LC47PzohXVtBLVphLXowLTldL2c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZzQgPSAvWyw7XFw/OlxcIVxcXVxcfV1bMC05XS9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlZzEudGVzdCh0ZW1wU3RyKSB8fCByZWcyLnRlc3QodGVtcFN0cikgfHwgcmVnMy50ZXN0KHRlbXBTdHIpIHx8IHJlZzQudGVzdCh0ZW1wU3RyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoc2V0dGluZ3MuTGlua1NwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgfHwgc2V0dGluZ3MuTGlua1NwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgfHwgc2V0dGluZ3MuTGlua1NwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgfHwgc2V0dGluZ3MuTGlua1NwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIExpbmsuMiDlpoLmnpzor6XljLrlnZfmnInlhYnmoIfvvIzliJnorqHnrpfmnIDnu4jlhYnmoIfkvY3nva5cclxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBjdXJzb3JSZWxhdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTGluay4zIOabtOaWsOWPmOmHj1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBwcmV2UGFydFR5cGUgPSBJbmxpbmVUeXBlLmxpbms7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAzLjIuNSDlpITnkIbnlKjmiLfoh6rlrprkuYnljLrlnZfnmoTpg6jliIZcclxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAvLyBVc2VyLjEg5qC55o2u5YmN5LiA5Yy65Z2X57G75Z6L5ZKMc2V0dGluZ3Pmt7vliqDnqbrmoLxcclxuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgfHwgc2V0dGluZ3MuVXNlclBhcnRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlIHx8IHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTcGFjZSB8fCBzZXR0aW5ncy5Vc2VyUGFydFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS51c2VyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVXNlci4yIOWmguaenOivpeWMuuWdl+acieWFieagh++8jOWImeiuoeeul+acgOe7iOWFieagh+S9jee9rlxyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gY3Vyc29yTGluZVBhcnRJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIGN1cnNvclJlbGF0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMaW5rLjMg5pu05paw5Y+Y6YePXHJcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUudXNlcjtcclxuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGxldCBpPTA7aTxsaW5lUGFydHMubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZihsaW5lUGFydHNbaV0udHlwZSA9PT0gSW5saW5lVHlwZS50ZXh0ICYmIGxpbmVQYXJ0c1tpXS5jb250ZW50IT1saW5lUGFydHNPcmlnaW5baV0uY29udGVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBsaW5lUGFydHNbaV0uY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzT3JpZ2luW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzT3JpZ2luW2ldLmVuZCxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IGxpbmVQYXJ0c09yaWdpbltpXS5jb250ZW50XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5saW5lQ2hhbmdlTGlzdCA9IGlubGluZUNoYW5nZUxpc3Quc29ydCgoYSwgYik6bnVtYmVyPT5hLmJlZ2luLWIuYmVnaW4pO1xyXG4gICAgcmV0dXJuIFtyZXN1bHRMaW5lLCByZXN1bHRDdXJzb3JDaCwgaW5saW5lQ2hhbmdlTGlzdF07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVhc3lUeXBpbmdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBGb3JtYXRTZXR0aW5ncztcclxuXHRrZXlDdHJsRmxhZzogYm9vbGVhbjtcclxuXHRrZXlTZXROb3RVcGRhdGU6IFNldDxzdHJpbmc+O1xyXG5cdGlucHV0Q2hpbmVzZUZsYWc6IGJvb2xlYW47XHJcbiAgICBwcmV2Q3Vyc29yOiBDb2RlTWlycm9yLlBvc2l0aW9uO1xyXG4gICAgbGluZVR5cGVBcnJheTogQXJ0aWNsZVBhcnRbXTtcclxuICAgIGNoZWNrTGluZVR5cGU6IGJvb2xlYW47XHJcbiAgICBwcmV2TGluZUNvdW50OiBudW1iZXI7XHJcbiAgICBwcmV2TGluZVR5cGU6IExpbmVUeXBlO1xyXG5cclxuICAgIHNlbGVjdGVkRm9ybWF0UmFuZ2U6Q29kZU1pcnJvci5SYW5nZTtcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ2xvYWRpbmcgcGx1Z2lu77yaRWFzeSBUeXBpbmcnKTtcclxuXHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdHRoaXMua2V5Q3RybEZsYWcgPSBmYWxzZTtcclxuXHRcdHRoaXMuaW5wdXRDaGluZXNlRmxhZyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5rZXlTZXROb3RVcGRhdGUgPSBuZXcgU2V0KFsnQ29udHJvbCcsICdUYWInLCAnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnLCAnQWx0JywgJ0JhY2tzcGFjZScsICdFc2NhcGUnLCAnRGVsZXRlJywgJ051bUxvY2snXSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gdGhpcy5wcmV2UG9zaXRpb24gPSB7dHlwZTpMaW5lVHlwZS5ub25lLCBsaW5lOjAsIGNoOjB9O1xyXG4gICAgICAgIHRoaXMucHJldkN1cnNvciA9IHtsaW5lOjAsIGNoOjB9O1xyXG4gICAgICAgIHRoaXMucHJldkxpbmVUeXBlID0gTGluZVR5cGUubm9uZTtcclxuICAgICAgICB0aGlzLnByZXZMaW5lQ291bnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubGluZVR5cGVBcnJheSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaGVja0xpbmVUeXBlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRm9ybWF0UmFuZ2UgPSBudWxsO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImVhc3ktdHlwaW5nLWZvcm1hdC1saW5lXCIsXHJcblx0XHRcdG5hbWU6IFwiZm9ybWF0IGN1cnJlbnQgbGluZVwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5jb21tYW5kRm9ybWF0TGluZSgpLFxyXG5cdFx0XHRob3RrZXlzOiBbe1xyXG5cdFx0XHRcdG1vZGlmaWVyczogWydBbHQnXSxcclxuXHRcdFx0XHRrZXk6IFwibFwiXHJcblx0XHRcdH1dLFxyXG5cdFx0fSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImVhc3ktdHlwaW5nLWZvcm1hdC1zd2l0Y2hcIixcclxuXHRcdFx0bmFtZTogXCJzd2l0Y2ggYXV0b2Zvcm1hdFwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5jb21tYW5kU3dpdGNoKCksXHJcblx0XHRcdGhvdGtleXM6IFt7XHJcblx0XHRcdFx0bW9kaWZpZXJzOiBbJ0N0cmwnXSxcclxuXHRcdFx0XHRrZXk6IFwidGFiXCJcclxuXHRcdFx0fV0sXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJlYXN5LXR5cGluZy1mb3JtYXQtbm90ZVwiLFxyXG5cdFx0XHRuYW1lOiBcImZvcm1hdCBjdXJyZW50IG5vdGVcIixcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHRoaXMuY29tbWFuZEZvcm1hdE5vdGUoKSxcclxuXHRcdFx0aG90a2V5czogW3tcclxuXHRcdFx0XHRtb2RpZmllcnM6IFsnQWx0J10sXHJcblx0XHRcdFx0a2V5OiBcImZcIlxyXG5cdFx0XHR9XSxcclxuXHRcdH0pO1x0XHRcclxuXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEVhc3lUeXBpbmdTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckNvZGVNaXJyb3IoKGNvZGVNaXJyb3JFZGl0b3I6IENvZGVNaXJyb3IuRWRpdG9yKSA9PiB7XHJcblx0XHRcdGNvZGVNaXJyb3JFZGl0b3Iub24oJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlVcCk7XHJcbiAgICAgICAgICAgIGNvZGVNaXJyb3JFZGl0b3Iub24oJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24pO1xyXG4gICAgICAgICAgICBjb2RlTWlycm9yRWRpdG9yLm9uKCdiZWZvcmVDaGFuZ2UnLCB0aGlzLmJlZm9yZUNoYW5nZSk7XHJcblx0XHR9KTtcclxuXHJcblx0fVxyXG5cclxuICAgIGJlZm9yZUNoYW5nZSA9IChlZGl0b3I6Q29kZU1pcnJvci5FZGl0b3IsIG9iajogQ29kZU1pcnJvci5FZGl0b3JDaGFuZ2VDYW5jZWxsYWJsZSk9PlxyXG4gICAge1xyXG4gICAgICAgIGlmKCF0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nKSByZXR1cm47XHJcbiAgICAgICAgbGV0IHN5bWJvbCA9IG9iai50ZXh0WzBdO1xyXG4gICAgICAgIGxldCByZXBsYWNlU3ltYm9sOnN0cmluZztcclxuXHJcbiAgICAgICAgbGV0IHJlZyA9IC9bLVxcYFxcJF0vO1xyXG4gICAgICAgIGlmKHJlZy50ZXN0KHN5bWJvbCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrTGluZVR5cGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkgJiYgdGhpcy5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhlbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5zZXR0aW5ncy5EZWJ1ZykgY29uc29sZS5sb2coJ2JlZm9yZSBjaGFuZ2U6IHN5bWJvbDonLCBzeW1ib2wpO1xyXG4gICAgICAgICAgICBzd2l0Y2goc3ltYm9sKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICfvv6UnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VTeW1ib2wgPSAnJCQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGb3JtYXRSYW5nZSA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnwrcnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VTeW1ib2wgPSAnYGAnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn44CQJzpcclxuICAgICAgICAgICAgICAgICAgICByZXBsYWNlU3ltYm9sID0gJ1tdJ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGb3JtYXRSYW5nZSA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VUZXh0ID0gcmVwbGFjZVN5bWJvbC5jaGFyQXQoMCkgK3NlbGVjdGVkKyByZXBsYWNlU3ltYm9sLmNoYXJBdCgxKTtcclxuXHJcbiAgICAgICAgICAgIG9iai51cGRhdGUobnVsbCwgbnVsbCwgW3JlcGxhY2VUZXh0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGVsc2UgaWYoIWVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpICYmIHRoaXMuc2V0dGluZ3MuRnVsbFdpZHRoQ2hhcmFjdGVyRW5oZW5jZSlcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIHN3aXRjaChzeW1ib2wpXHJcbiAgICAgICAgLy8gICAgIHtcclxuICAgICAgICAvLyAgICAgICAgIGNhc2UgJ+KApuKApic6XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgb2JqLnVwZGF0ZShudWxsLCBudWxsLCBbJ14nXSk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZygndW5sb2FkaW5nIHBsdWdpbicpO1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQ29kZU1pcnJvcnMoKGNvZGVNaXJyb3JFZGl0b3I6IENvZGVNaXJyb3IuRWRpdG9yKSA9PiB7XHJcblx0XHRcdGNvZGVNaXJyb3JFZGl0b3Iub2ZmKCdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXApO1xyXG4gICAgICAgICAgICBjb2RlTWlycm9yRWRpdG9yLm9mZigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XHJcbiAgICAgICAgICAgIGNvZGVNaXJyb3JFZGl0b3Iub2ZmKCdiZWZvcmVDaGFuZ2UnLCB0aGlzLmJlZm9yZUNoYW5nZSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cclxuICAgIGNvbW1hbmRTd2l0Y2goKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmcgPSB0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPyBmYWxzZTp0cnVlO1xyXG4gICAgICAgIGxldCBzdGF0dXMgPSB0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPydvbic6J29mZic7XHJcbiAgICAgICAgbmV3IE5vdGljZSgnQXV0b2Zvcm1hdCBpcyAnKyBzdGF0dXMgKychJyk7XHJcbiAgICB9XHJcblxyXG5cdGNvbW1hbmRGb3JtYXROb3RlKClcclxuXHR7XHJcblx0XHRsZXQgYWN0aXZlTGVhZjogYW55ID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XHJcblx0XHRsZXQgZWRpdG9yID0gYWN0aXZlTGVhZi52aWV3LnNvdXJjZU1vZGUuY21FZGl0b3IgYXMgQ29kZU1pcnJvci5FZGl0b3I7XHJcblx0XHRsZXQgdHlwZUFycmF5ID0gc3BsaXRBcnRpY2xlKGVkaXRvci5nZXRWYWx1ZSgpKTtcclxuICAgICAgICBmb3IobGV0IGk9MDsgaTx0eXBlQXJyYXkubGVuZ3RoO2krKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHR5cGVBcnJheVtpXS50eXBlPT09TGluZVR5cGUudGV4dClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqPXR5cGVBcnJheVtpXS5iZWdpbjsgajx0eXBlQXJyYXlbaV0uZW5kO2orKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGVkaXRvci5nZXRMaW5lKGopO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdMaW5lID0gZm9ybWF0TGluZShsaW5lLCB7bGluZTpqLCBjaDpsaW5lLmxlbmd0aH0sIHRoaXMuc2V0dGluZ3MpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld0xpbmUhPWxpbmUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnQ6IENvZGVNaXJyb3IuUG9zaXRpb24gPSB7bGluZTpqLCBjaDowfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZDogQ29kZU1pcnJvci5Qb3NpdGlvbiA9IHtsaW5lOmosIGNoOmxpbmUubGVuZ3RofTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShuZXdMaW5lLCBzdGFydCwgZW5kKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbmV3IE5vdGljZSgnRm9ybWF0IE5vdGUgRG9uZSEnKTtcclxuXHR9XHJcblx0Y29tbWFuZEZvcm1hdExpbmUoKVxyXG5cdHtcclxuXHRcdGxldCBhY3RpdmVMZWFmOiBhbnkgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcclxuXHRcdGxldCBlZGl0b3IgPSBhY3RpdmVMZWFmLnZpZXcuc291cmNlTW9kZS5jbUVkaXRvciBhcyBDb2RlTWlycm9yLkVkaXRvcjtcclxuXHRcdGxldCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRsZXQgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcclxuXHRcdGxldCByZXQgPSBmb3JtYXRMaW5lKGxpbmUsIGN1cnNvciwgdGhpcy5zZXR0aW5ncyk7XHJcblx0XHRsZXQgaW5saW5lQ2hhbmdlTGlzdCA9IHJldFsyXTtcclxuICAgICAgICBpZihpbmxpbmVDaGFuZ2VMaXN0Lmxlbmd0aCAhPSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8aW5saW5lQ2hhbmdlTGlzdC5sZW5ndGg7aSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlQmVnaW46Q29kZU1pcnJvci5Qb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBjdXJzb3IubGluZSxcclxuICAgICAgICAgICAgICAgICAgICBjaDogaW5saW5lQ2hhbmdlTGlzdFtpXS5iZWdpbitvZmZzZXRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VFbmQ6Q29kZU1pcnJvci5Qb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBjdXJzb3IubGluZSxcclxuICAgICAgICAgICAgICAgICAgICBjaDogaW5saW5lQ2hhbmdlTGlzdFtpXS5lbmQrb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gaW5saW5lQ2hhbmdlTGlzdFtpXS50ZXh0Lmxlbmd0aCAtIGlubGluZUNoYW5nZUxpc3RbaV0ub3JpZ2luLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoaW5saW5lQ2hhbmdlTGlzdFtpXS50ZXh0LCBjaGFuZ2VCZWdpbiwgY2hhbmdlRW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtcclxuXHRcdFx0XHRsaW5lOiBjdXJzb3IubGluZSxcclxuXHRcdFx0XHRjaDogcmV0WzFdXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRlZGl0b3IuZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgIFxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZWFkb25seSBoYW5kbGVLZXlEb3duID0gKGVkaXRvcjogQ29kZU1pcnJvci5FZGl0b3IsIGV2ZW50OiBLZXlib2FyZEV2ZW50KTp2b2lkID0+XHJcblx0e1xyXG4gICAgICAgIGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PScpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdrZXlkb3duOicsIGV2ZW50LmtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighdGhpcy5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZykgcmV0dXJuO1xyXG5cdFx0XHJcblx0XHRpZihldmVudC5rZXkgPT09ICdQcm9jZXNzJylcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5pbnB1dENoaW5lc2VGbGFnID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGlmKGV2ZW50LmtleSA9PT0gJ0NvbnRyb2wnKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLmtleUN0cmxGbGFnID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaGFuZGxlS2V5VXA9KGVkaXRvcjogQ29kZU1pcnJvci5FZGl0b3IsIGV2ZW50OiBLZXlib2FyZEV2ZW50KTp2b2lkID0+XHJcblx0e1xyXG5cclxuICAgICAgICBpZih0aGlzLnNldHRpbmdzLkRlYnVnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT0nKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygna2V5dXA6JywgZXZlbnQua2V5KTtcclxuXHJcbiAgICAgICAgICAgIGlmKGV2ZW50LmtleSA9PT0gJ0Y0JylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUZXN0IEJlZ2luPT09PT09PT09PT09PT09PT09PT09PT09XCIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRlc3QgRW5kPT09PT09PT09PT09PT09PT09PT09PT09XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYodGhpcy5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZz09PWZhbHNlKVxyXG5cdFx0e1xyXG4gICAgICAgICAgICB0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgLy8gc2VsZWN0Rm9ybWF0XHJcbiAgICAgICAgaWYodGhpcy5zZWxlY3RlZEZvcm1hdFJhbmdlIT1udWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkU3RhcnQgPSB0aGlzLnNlbGVjdGVkRm9ybWF0UmFuZ2UuZnJvbSgpO1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRFbmQgPSB0aGlzLnNlbGVjdGVkRm9ybWF0UmFuZ2UudG8oKTtcclxuICAgICAgICAgICAgc2VsZWN0ZWRTdGFydC5jaCArPSAxO1xyXG4gICAgICAgICAgICBzZWxlY3RlZEVuZC5jaCArPSAxO1xyXG4gICAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKHNlbGVjdGVkU3RhcnQsIHNlbGVjdGVkRW5kKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZvcm1hdFJhbmdlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBpZih0aGlzLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGVuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICBsZXQgdHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCB0d29DaGFyYWN0ZXJzTmVhckN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbGV0IGNoYXJhY3RlcjJjdXJzb3IxID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsZXQgdHdvQ2hhcmFjdGVyc0FmdGVyQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMn1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc3dpdGNoKGV2ZW50LmtleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnJCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICfvv6UnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICfvv6Xvv6UnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICckJCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjaGFyYWN0ZXIyY3Vyc29yMT09PSck77+lJCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoY3Vyc29yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1snOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAn44CQJzpcclxuICAgICAgICAgICAgICAgICAgICBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnW1snICYmIHR3b0NoYXJhY3RlcnNBZnRlckN1cnNvciE9J11dJylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnW1tdXScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlICdgJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ8K3JzpcclxuICAgICAgICAgICAgICAgICAgICBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnwrfCtycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2BgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGNoYXJhY3RlcjJjdXJzb3IxPT09J2DCt2AnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0aWYoZXZlbnQua2V5ID09PSAnQ29udHJvbCcpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMua2V5Q3RybEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZih0aGlzLmtleUN0cmxGbGFnICYmIGV2ZW50LmtleSA9PT0gJ3onKVxyXG5cdFx0e1xyXG4gICAgICAgICAgICB0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZih0aGlzLmtleVNldE5vdFVwZGF0ZS5oYXMoZXZlbnQua2V5KSlcclxuXHRcdHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRcclxuXHJcblx0XHRpZih0aGlzLmlucHV0Q2hpbmVzZUZsYWcpXHJcblx0XHR7XHJcblx0XHRcdC8vIHdpbmRvd3PkuIvliKTmlq3kuK3mlofovpPlhaXnmoTnu5PmnZ/ngrnvvIzmo4DmtYvliLDmlbDlrZfmiJbogIXnqbrmoLzlsLHmmK/ovpPlhaXkuK3mlofnu5PmnZ/vvIxTaGlmdOaYr+S4reaWh+i+k+WFpeazlei+k+WFpeiLseaWh+OAglxyXG5cdFx0XHQvLyDljLnphY0sLjsnPD7mmK/kuK3mlofovpPlhaXms5XnmoTlhajop5LlrZfnrKbvvIzjgILvvJvigJjigJnjgIrjgItcclxuXHRcdFx0aWYoZXZlbnQua2V5Lm1hdGNoKC9bMC05ICwuOzw+OidgXFxcXFxcL10vZ2kpIT1udWxsIHx8IGV2ZW50LmtleT09PSdTaGlmdCcpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcImNoaW5lc2UgaW5wdXQgZG9uZSFcIik7XHJcblx0XHRcdFx0dGhpcy5pbnB1dENoaW5lc2VGbGFnID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGxldCBsaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xyXG4gICAgICAgIGxldCB0aGlzTGluZVR5cGU6TGluZVR5cGU7XHJcblxyXG4gICAgICAgIC8vIOWcqOaWh+aho+ihjOaVsOWPmOWMluaXtu+8jOaIluiAhWNoZWNrTGluZVR5cGXkuLrnnJ/ml7bvvIzph43mlrAgcGFyc2UgYXJ0aWNsZVxyXG4gICAgICAgIGlmKHRoaXMuY2hlY2tMaW5lVHlwZSB8fCB0aGlzLnByZXZMaW5lQ291bnQhPWVkaXRvci5saW5lQ291bnQoKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIG5ldyBOb3RpY2UoJ3JlcGFyc2UgYXJ0aWNsZScpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVUeXBlQXJyYXkgPSBzcGxpdEFydGljbGUoZWRpdG9yLmdldFZhbHVlKCkpO1xyXG4gICAgICAgICAgICB0aGlzTGluZVR5cGUgPSBnZXRMaW5lVHlwZUZyb21BcnRpY2xlUGFydHMoY3Vyc29yLmxpbmUsIHRoaXMubGluZVR5cGVBcnJheSk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkxpbmVUeXBlID0gdGhpc0xpbmVUeXBlO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZMaW5lQ291bnQgPSBlZGl0b3IubGluZUNvdW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tMaW5lVHlwZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlnKjlhbbku5booYznvJbovpHnmoTml7blgJnvvIzpnIDopoHlhYjojrflj5bkuIvooYznmoTnsbvlnotcclxuICAgICAgICBlbHNlIGlmKGN1cnNvci5saW5lICE9IHRoaXMucHJldkN1cnNvci5saW5lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpc0xpbmVUeXBlID0gZ2V0TGluZVR5cGVGcm9tQXJ0aWNsZVBhcnRzKGN1cnNvci5saW5lLCB0aGlzLmxpbmVUeXBlQXJyYXkpO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZMaW5lVHlwZSA9IHRoaXNMaW5lVHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpc0xpbmVUeXBlID0gdGhpcy5wcmV2TGluZVR5cGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzTGluZVR5cGUhPUxpbmVUeXBlLnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG5cdFx0bGV0IHJldCA9IGZvcm1hdExpbmUobGluZSwgY3Vyc29yLCB0aGlzLnNldHRpbmdzLCB0aGlzLnByZXZDdXJzb3IpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGxpbmUpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmV0KVxyXG4gICAgICAgIGxldCBpbmxpbmVDaGFuZ2VMaXN0ID0gcmV0WzJdO1xyXG4gICAgICAgIGlmKGlubGluZUNoYW5nZUxpc3QubGVuZ3RoICE9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxpbmxpbmVDaGFuZ2VMaXN0Lmxlbmd0aDtpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VCZWdpbjpDb2RlTWlycm9yLlBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoOiBpbmxpbmVDaGFuZ2VMaXN0W2ldLmJlZ2luK29mZnNldFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGNoYW5nZUVuZDpDb2RlTWlycm9yLlBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoOiBpbmxpbmVDaGFuZ2VMaXN0W2ldLmVuZCtvZmZzZXRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBpbmxpbmVDaGFuZ2VMaXN0W2ldLnRleHQubGVuZ3RoIC0gaW5saW5lQ2hhbmdlTGlzdFtpXS5vcmlnaW4ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShpbmxpbmVDaGFuZ2VMaXN0W2ldLnRleHQsIGNoYW5nZUJlZ2luLCBjaGFuZ2VFbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe1xyXG5cdFx0XHRcdGxpbmU6IGN1cnNvci5saW5lLFxyXG5cdFx0XHRcdGNoOiByZXRbMV1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGVkaXRvci5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBFYXN5VHlwaW5nU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogRWFzeVR5cGluZ1BsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRWFzeVR5cGluZ1BsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0bGV0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Ly8gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdTZXR0aW5ncyBmb3IgRWFzeSBUeXBpbmcuJ30pO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnYScsIHt0ZXh0OiAnTW9yZSBkZXRhaWwgaXMgaW4gR2l0aHViOiBlYXN5LXR5cGluZy1vYnNpZGlhbicsIGhyZWY6J2h0dHBzOi8vZ2l0aHViLmNvbS9ZYW96aHV3YS9lYXN5LXR5cGluZy1vYnNpZGlhbid9KTtcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAn5oC75byA5YWzIChNYXN0ZXIgU3dpdGNoKSd9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiQXV0byBmb3JtYXR0aW5nIHdoZW4gdHlwaW5nXCIpXHJcblx0XHQuc2V0RGVzYyhcIuaYr+WQpuWcqOe8lui+keaWh+aho+aXtuiHquWKqOagvOW8j+WMluaWh+acrFwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmcpXHJcblx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmcgPSB2YWx1ZTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkF1dG9Gb3JtYXR0aW5nOlwiLHZhbHVlKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ+ivpue7huinhOWImeW8gOWFsyAoU3ViIFN3aXRjaGVzKSd9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBDaGluZXNlIGFuZCBFbmdsaXNoL251bWJlclwiKVxyXG5cdFx0LnNldERlc2MoXCLlnKjkuK3mloflkozoi7Hmlocv5pWw5a2X6Ze056m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5DaGluZXNlRW5nbGlzaFNwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2hpbmVzZUVuZ2xpc2hTcGFjZSA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJEZWxldGUgdGhlIFNwYWNlIGJldHdlZW4gQ2hpbmVzZSBjaGFyYWN0ZXJzXCIpXHJcblx0XHQuc2V0RGVzYyhcIuWcqOS4reaWh+Wtl+espumXtOWOu+mZpOepuuagvFwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2hpbmVzZU5vU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5DaGluZXNlTm9TcGFjZSA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTcGFjZSBiZXR3ZWVuIEVuZ2xpc2ggd2l0aCBwdW5jdHVhdGVcIilcclxuXHRcdC5zZXREZXNjKFwi5Zyo6Iux5paH5paH5pys5ZKM5qCH54K56Ze056m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5FbmdsaXNoU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5FbmdsaXNoU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiQ2FwaXRhbGl6ZSB0aGUgZmlyc3QgbGV0dGVyIG9mIGV2ZXJ5IHNlbnRlbmNlXCIpXHJcblx0XHQuc2V0RGVzYyhcIuiLseaWh+avj+S4quWPpemmluWtl+avjeWkp+WGmVwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2FwaXRhbGl6YXRpb24pLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5DYXBpdGFsaXphdGlvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTcGFjZSBiZXR3ZWVuIG51bWJlciBhbmQgRW5nbGlzaCB0ZXh0XCIpXHJcblx0XHQuc2V0RGVzYyhcIuaVsOWtl+WSjOagh+eCuemXtOepuuagvFwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuTnVtYmVyU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5OdW1iZXJTcGFjZSA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTcGFjZSBiZXR3ZWVuIEVuZ2xpc2ggYnJhY2VzIGFuZCB0ZXh0XCIpXHJcblx0XHQuc2V0RGVzYyhcIuWcqOiLseaWh+Wwj+aLrOWPt+WSjOaWh+acrOmXtOepuuagvFwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuQnJhY2VTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkJyYWNlU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBpbmxpbmUgY29kZSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCLlnKggYOihjOWGheS7o+eggWAg5ZKM5paH5pys6Ze056m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBpbmxpbmUgZm9ybXVsYSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCLlnKggJOihjOWGheWFrOW8jyQg5ZKM5paH5pys6Ze056m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBsaW5rIGFuZCB0ZXh0XCIpXHJcblx0XHQuc2V0RGVzYyhcIuWcqCBbW3dpa2lsaW5rXV0gbWRsaW5rIOWSjOaWh+acrOmXtOepuuagvFwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuTGlua1NwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuTGlua1NwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTbWFydCBTcGFjZSBiZXR3ZWVuIGxpbmsgYW5kIHRleHRcIilcclxuXHRcdC5zZXREZXNjKFwi5ZyoIFtbd2lraWxpbmtdXSBtZGxpbmsg5ZKM5paH5pys6Ze05pm66IO956m65qC8XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5MaW5rU21hcnRTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkxpbmtTbWFydFNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJGdWxsLVdpZHRoIHN5bWJvbCBpbnB1dCBlbmhhbmNlbWVudFwiKVxyXG5cdFx0LnNldERlc2MoXCLlhajop5LnrKblj7fovpPlhaXlop7lvLpcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGVuY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhlbmNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTcGFjZSBiZXR3ZWVuIFVzZXIgRGVmaW5lZCBQYXJ0KHNlbGVjdGVkIGJ5IFJlZ0V4cCkgYW5kIHRleHRcIilcclxuXHRcdC5zZXREZXNjKFwi5Zyo55So5oi36Ieq5a6a5LmJ5Yy65Z2XKOato+WImeihqOi+vuW8j+mAieaLqSnlkozmlofmnKzkuYvpl7TnqbrmoLxcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJQYXJ0U3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyUGFydFNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJVc2VyIERlZmluZWQgUmVnRXhwIFN3aXRjaFwiKVxyXG5cdFx0LnNldERlc2MoXCLoh6rlrprkuYnmraPliJnooajovr7lvI/lvIDlhbPvvIzljLnphY3liLDnmoTlhoXlrrnkuI3ov5vooYzmoLzlvI/ljJZcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnU3dpdGNoKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlckRlZmluZWRSZWdTd2l0Y2ggPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlVzZXIgZGVmaW5lZCBSZWdFeHAgdG8gaWdub3JlLCBvbmUgZXhwcmVzc2lvbiBwZXIgbGluZVwiKVxyXG5cdFx0LnNldERlc2MoXCLnlKjmiLfoh6rlrprkuYnmraPliJnooajovr7lvI/vvIzljLnphY3liLDnmoTlhoXlrrnkuI3ov5vooYzmoLzlvI/ljJbvvIzmr4/ooYzkuIDkuKrooajovr7lvI/vvIzooYzlsL7kuI3opoHpmo/mhI/liqDnqbrmoLxcIilcclxuXHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cclxuXHRcdFx0dGV4dFxyXG5cdFx0XHQuc2V0UGxhY2Vob2xkZXIoJzpcXFxcdyo6XFxue3suKj99fScpXHJcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ0V4cClcclxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnRXhwID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnBsdWdpbi5zZXR0aW5ncy5EZWJ1ZykgY29uc29sZS5sb2coXCJyZWdFeHAgY2hhbmdlZDpcIiwgdmFsdWUpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2EnLCB7dGV4dDogJ1JlZ0V4cDog5q2j5YiZ6KGo6L6+5byPJywgaHJlZjonaHR0cHM6Ly9qYXZhc2NyaXB0LnJ1YW55aWZlbmcuY29tL3N0ZGxpYi9yZWdleHAuaHRtbCMnfSk7XHJcblxyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ0RlYnVnJ30pO1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJQcmludCBkZWJ1ZyBpbmZvIGluIGNvbnNvbGVcIilcclxuXHRcdC5zZXREZXNjKFwi5Zyo5o6n5Yi25Y+w6L6T5Ye66LCD6K+V5L+h5oGvXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5EZWJ1Zykub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkRlYnVnID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxufVxyXG4iXSwibmFtZXMiOlsiUGx1Z2luIiwiTm90aWNlIiwiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1REE7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxH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
